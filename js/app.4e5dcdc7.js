(function(){var e={6700:function(e,t,a){var s={"./af":3906,"./af.js":3906,"./ar":902,"./ar-dz":3853,"./ar-dz.js":3853,"./ar-kw":299,"./ar-kw.js":299,"./ar-ly":6825,"./ar-ly.js":6825,"./ar-ma":6379,"./ar-ma.js":6379,"./ar-sa":7700,"./ar-sa.js":7700,"./ar-tn":2059,"./ar-tn.js":2059,"./ar.js":902,"./az":6043,"./az.js":6043,"./be":7936,"./be.js":7936,"./bg":4078,"./bg.js":4078,"./bm":4014,"./bm.js":4014,"./bn":9554,"./bn-bd":7114,"./bn-bd.js":7114,"./bn.js":9554,"./bo":6529,"./bo.js":6529,"./br":5437,"./br.js":5437,"./bs":9647,"./bs.js":9647,"./ca":9951,"./ca.js":9951,"./cs":6113,"./cs.js":6113,"./cv":7965,"./cv.js":7965,"./cy":5858,"./cy.js":5858,"./da":3515,"./da.js":3515,"./de":2831,"./de-at":6263,"./de-at.js":6263,"./de-ch":1127,"./de-ch.js":1127,"./de.js":2831,"./dv":4510,"./dv.js":4510,"./el":8616,"./el.js":8616,"./en-au":4595,"./en-au.js":4595,"./en-ca":3545,"./en-ca.js":3545,"./en-gb":9609,"./en-gb.js":9609,"./en-ie":3727,"./en-ie.js":3727,"./en-il":3302,"./en-il.js":3302,"./en-in":6305,"./en-in.js":6305,"./en-nz":9128,"./en-nz.js":9128,"./en-sg":4569,"./en-sg.js":4569,"./eo":650,"./eo.js":650,"./es":6358,"./es-do":4214,"./es-do.js":4214,"./es-mx":8639,"./es-mx.js":8639,"./es-us":232,"./es-us.js":232,"./es.js":6358,"./et":7279,"./et.js":7279,"./eu":5515,"./eu.js":5515,"./fa":7981,"./fa.js":7981,"./fi":7090,"./fi.js":7090,"./fil":9208,"./fil.js":9208,"./fo":2799,"./fo.js":2799,"./fr":3463,"./fr-ca":2213,"./fr-ca.js":2213,"./fr-ch":2848,"./fr-ch.js":2848,"./fr.js":3463,"./fy":1468,"./fy.js":1468,"./ga":8163,"./ga.js":8163,"./gd":2898,"./gd.js":2898,"./gl":6312,"./gl.js":6312,"./gom-deva":682,"./gom-deva.js":682,"./gom-latn":9178,"./gom-latn.js":9178,"./gu":5009,"./gu.js":5009,"./he":2795,"./he.js":2795,"./hi":7009,"./hi.js":7009,"./hr":6506,"./hr.js":6506,"./hu":9565,"./hu.js":9565,"./hy-am":3864,"./hy-am.js":3864,"./id":5626,"./id.js":5626,"./is":6649,"./is.js":6649,"./it":151,"./it-ch":5348,"./it-ch.js":5348,"./it.js":151,"./ja":9830,"./ja.js":9830,"./jv":3751,"./jv.js":3751,"./ka":3365,"./ka.js":3365,"./kk":5980,"./kk.js":5980,"./km":9571,"./km.js":9571,"./kn":5880,"./kn.js":5880,"./ko":6809,"./ko.js":6809,"./ku":6773,"./ku.js":6773,"./ky":5505,"./ky.js":5505,"./lb":553,"./lb.js":553,"./lo":1237,"./lo.js":1237,"./lt":1563,"./lt.js":1563,"./lv":1057,"./lv.js":1057,"./me":6495,"./me.js":6495,"./mi":3096,"./mi.js":3096,"./mk":3874,"./mk.js":3874,"./ml":6055,"./ml.js":6055,"./mn":7747,"./mn.js":7747,"./mr":7113,"./mr.js":7113,"./ms":8687,"./ms-my":7948,"./ms-my.js":7948,"./ms.js":8687,"./mt":4532,"./mt.js":4532,"./my":4655,"./my.js":4655,"./nb":6961,"./nb.js":6961,"./ne":2512,"./ne.js":2512,"./nl":8448,"./nl-be":2936,"./nl-be.js":2936,"./nl.js":8448,"./nn":9031,"./nn.js":9031,"./oc-lnc":5174,"./oc-lnc.js":5174,"./pa-in":118,"./pa-in.js":118,"./pl":3448,"./pl.js":3448,"./pt":3518,"./pt-br":2447,"./pt-br.js":2447,"./pt.js":3518,"./ro":817,"./ro.js":817,"./ru":262,"./ru.js":262,"./sd":8990,"./sd.js":8990,"./se":3842,"./se.js":3842,"./si":7711,"./si.js":7711,"./sk":756,"./sk.js":756,"./sl":3772,"./sl.js":3772,"./sq":6187,"./sq.js":6187,"./sr":732,"./sr-cyrl":5713,"./sr-cyrl.js":5713,"./sr.js":732,"./ss":9455,"./ss.js":9455,"./sv":9770,"./sv.js":9770,"./sw":959,"./sw.js":959,"./ta":6459,"./ta.js":6459,"./te":5302,"./te.js":5302,"./tet":7975,"./tet.js":7975,"./tg":1294,"./tg.js":1294,"./th":2385,"./th.js":2385,"./tk":4613,"./tk.js":4613,"./tl-ph":8668,"./tl-ph.js":8668,"./tlh":8190,"./tlh.js":8190,"./tr":4506,"./tr.js":4506,"./tzl":3440,"./tzl.js":3440,"./tzm":9852,"./tzm-latn":2350,"./tzm-latn.js":2350,"./tzm.js":9852,"./ug-cn":730,"./ug-cn.js":730,"./uk":99,"./uk.js":99,"./ur":2100,"./ur.js":2100,"./uz":6002,"./uz-latn":6322,"./uz-latn.js":6322,"./uz.js":6002,"./vi":4207,"./vi.js":4207,"./x-pseudo":4674,"./x-pseudo.js":4674,"./yo":570,"./yo.js":570,"./zh-cn":3644,"./zh-cn.js":3644,"./zh-hk":2591,"./zh-hk.js":2591,"./zh-mo":9503,"./zh-mo.js":9503,"./zh-tw":8080,"./zh-tw.js":8080};function o(e){var t=n(e);return a(t)}function n(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}o.keys=function(){return Object.keys(s)},o.resolve=n,e.exports=o,o.id=6700},889:function(e,t,a){"use strict";var s=a(9242),o=a(4870),n=a(2483),r=a(7139);const i=(0,r.MT)({state(){const e="true"===localStorage.getItem("checkboxValue"),t="true"===localStorage.getItem("isLoggedIn"),a=localStorage.getItem("current_warehouse_logged_id")||"",s=6e5,o=localStorage.getItem("sessionToken")||"",n="true"===localStorage.getItem("LogAttempts");let r=null;try{r=JSON.parse(localStorage.getItem("user"))}catch(i){console.error("Error parsing 'user' from localStorage:",i)}return{checkboxValue:e,isLoggedIn:t,currentWarehouseLoggedId:a,sessionTimeout:s,sessionToken:o,LogAttempts:n,user:r,selectedItems:[],warehouseSend:{}}},mutations:{toggleCheckboxValue(e){e.checkboxValue=!e.checkboxValue},setCheck(e,t){e.checkboxValue=t,localStorage.setItem("checkboxValue",t.toString())},setLoggedIn(e,t){e.isLoggedIn=t,localStorage.setItem("isLoggedIn",t.toString())},setSessionToken(e,t){e.sessionToken=t,localStorage.setItem("sessionToken",t.toString())},setLogAttempt(e,t){e.LogAttempts=t},setUser(e,t){e.user=t,localStorage.setItem("user",JSON.stringify(t))},setCurrentWarehouseLoggedId(e,t){e.currentWarehouseLoggedId=t,localStorage.setItem("current_warehouse_logged_id",t)},setSelectedItems(e,t){e.selectedItems=t},setWarehouse(e,t){e.warehouseSend=t}}});var l=i,c=a(3396),d=a(2268);const u=e=>((0,c.dD)("data-v-37764d84"),e=e(),(0,c.Cn)(),e),m={class:"container-fluid"},h={class:"button-container"},_={class:"filter-row"},g=u((()=>(0,c._)("label",{for:"bodega"},"Bodega:",-1))),p=u((()=>(0,c._)("option",{value:""},"Todas las bodegas",-1))),b=["value"],f={class:"filter-row"},v=u((()=>(0,c._)("label",{for:"tipo"},"Tipo de artículo:",-1))),w=u((()=>(0,c._)("option",{value:""},"Todos los tipos",-1))),y=["value"],k={class:"row"},C={class:"col-lg-6"},x={class:"card",style:{height:"450px !important"}},D={class:"card-body"},I=u((()=>(0,c._)("h4",{class:"card-title text-success"}," Top 10 artículos con más envíos a tienda ",-1))),S={class:"chart-container"},O={ref:"chartCanvas"},V={class:"col-lg-6"},A={class:"card",style:{height:"452px !important"}},T={class:"card-body"},$=u((()=>(0,c._)("h4",{class:"card-title text-danger"}," Artículos por debajo de la cantidad mínima de stock ",-1))),U={class:"table-container"},L={class:"table table-bordered kpi-table"},j=u((()=>(0,c._)("thead",null,[(0,c._)("tr",null,[(0,c._)("th",null,"Código de producto"),(0,c._)("th",null,"Nombre"),(0,c._)("th",null,"Cantidad de stock"),(0,c._)("th",null,"Bodega"),(0,c._)("th",null,"Marcar para hacer entrada")])],-1))),z=["value"],E=["disabled"],B={class:"row"},H={class:"col-lg-6",style:{"margin-top":"20px"}},W={class:"card",style:{height:"452px !important"}},Z={class:"card-body"},P=u((()=>(0,c._)("h4",{class:"card-title text-primary text-center"}," Últimos movimientos realizados en el inventario ",-1))),F={class:"table-container",style:{"max-height":"450px !important",height:"390px !important"}},M={class:"table table-bordered kpi-table"},q=u((()=>(0,c._)("thead",null,[(0,c._)("tr",null,[(0,c._)("th",null,"Fecha de movimiento"),(0,c._)("th",null,"Descripción del movimiento"),(0,c._)("th",null,"Bodega"),(0,c._)("th",null,"Responsable")])],-1))),N={class:"col-lg-6",style:{"margin-top":"20px"}},Y={class:"card",style:{height:"452px !important"}},K={class:"card-body"},R=u((()=>(0,c._)("h4",{class:"card-title text-danger"}," Comparativa de Stock y Nivel Deseado por Artículo ",-1))),Q={class:"chart-container"},G={ref:"chartLow"};function J(e,t,a,o,n,r){return(0,c.wg)(),(0,c.iD)("div",null,[(0,c.wy)((0,c._)("input",{type:"checkbox",id:"check","onUpdate:modelValue":t[0]||(t[0]=e=>r.checked=e),onChange:t[1]||(t[1]=(...t)=>e.handleCheckboxChange&&e.handleCheckboxChange(...t))},null,544),[[s.e8,r.checked]]),(0,c._)("div",m,[(0,c._)("div",h,[(0,c._)("div",_,[g,(0,c.wy)((0,c._)("select",{id:"bodega","onUpdate:modelValue":t[2]||(t[2]=e=>n.selectedBodega=e),onChange:t[3]||(t[3]=(...e)=>r.filterProductos&&r.filterProductos(...e))},[p,((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(n.bodegas,(e=>((0,c.wg)(),(0,c.iD)("option",{key:e,value:e},(0,d.zw)(e),9,b)))),128))],544),[[s.bM,n.selectedBodega]])]),(0,c._)("div",f,[v,(0,c.wy)((0,c._)("select",{id:"tipo","onUpdate:modelValue":t[4]||(t[4]=e=>n.selectedTipo=e),onChange:t[5]||(t[5]=(...e)=>r.filterProductos&&r.filterProductos(...e))},[w,((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(n.tipos,(e=>((0,c.wg)(),(0,c.iD)("option",{key:e,value:e},(0,d.zw)(e),9,y)))),128))],544),[[s.bM,n.selectedTipo]])])]),(0,c._)("div",k,[(0,c._)("div",C,[(0,c._)("div",x,[(0,c._)("div",D,[I,(0,c._)("div",S,[(0,c._)("canvas",O,null,512)])])])]),(0,c._)("div",V,[(0,c._)("div",A,[(0,c._)("div",T,[$,(0,c._)("div",U,[(0,c._)("table",L,[j,(0,c._)("tbody",null,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(n.productosLow,((e,a)=>((0,c.wg)(),(0,c.iD)("tr",{key:a},[(0,c._)("td",null,(0,d.zw)(e.item_id),1),(0,c._)("td",null,(0,d.zw)(e.name),1),(0,c._)("td",null,(0,d.zw)(e.storing_format_units),1),(0,c._)("td",null,(0,d.zw)(e.warehouse),1),(0,c._)("td",null,[(0,c.wy)((0,c._)("input",{type:"checkbox",value:e,"onUpdate:modelValue":t[6]||(t[6]=e=>n.selectedProductos=e)},null,8,z),[[s.e8,n.selectedProductos]])])])))),128))])])]),(0,c._)("button",{onClick:t[7]||(t[7]=(...e)=>r.hacerEntrada&&r.hacerEntrada(...e)),class:"btn btn-success",disabled:0===n.selectedProductos.length||!r.mismaBodega(n.selectedProductos),style:{position:"absolute",bottom:"0",right:"0",margin:"10px","margin-bottom":"20px","margin-right":"20px"}}," Hacer entrada ",8,E)])])])]),(0,c._)("div",B,[(0,c._)("div",H,[(0,c._)("div",W,[(0,c._)("div",Z,[P,(0,c._)("div",F,[(0,c._)("table",M,[q,(0,c._)("tbody",null,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(n.sortedMovements,(e=>((0,c.wg)(),(0,c.iD)("tr",{key:e.id},[(0,c._)("td",null,(0,d.zw)(e.date),1),(0,c._)("td",null,(0,d.zw)(e.description),1),(0,c._)("td",null,(0,d.zw)(e.warehouse),1),(0,c._)("td",null,(0,d.zw)(e.responsible),1)])))),128))])])])])])]),(0,c._)("div",N,[(0,c._)("div",Y,[(0,c._)("div",K,[R,(0,c._)("div",Q,[(0,c._)("canvas",G,null,512)])])])])])])])}a(7658);var X=a(1632),ee=a(4161);const te="https://mercado-telas-test-01a354800b9e.herokuapp.com";var ae=a(672),se=a(6797),oe=a.n(se),ne={data(){return{sortedMovements:[],productosLow:[],productos:[],productosLowClone:[],productosClone:[],movementsData:[],selectedBodega:"",selectedTipo:"",selectedProductos:[],bodegas:[],tipos:[],chartTop10:null,chartLow:null}},computed:{...(0,r.rn)(["checkboxValue"]),checked:{get(){return this.checkboxValue}}},mounted(){const e=(0,r.oR)();this.$state.navbarTitle="Inicio";const t=e.state.user;e.state.LogAttempts||(ae.Am.success(`Hola ${t.name}, bienvenido al sistema de inventario del Mercado de las Telas`,{position:"top-right",timeout:2500,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}),e.commit("setLogAttempt",!0)),ee.Z.get(te+"/categories").then((e=>{this.tipos=e.data.map((e=>e.name))})).catch((e=>{console.log(e)})),ee.Z.get(`${te}/warehouses`).then((e=>{this.bodegas=e.data.map((e=>e.name))})).catch((e=>{console.log(e)})),ee.Z.get(te+"/movement_logs").then((e=>{this.movementsData=e.data.movements_log.map((e=>({item_id:e.id,description:e.description,date:oe()(e.created_at).format("DD/MM/YYYY"),warehouse:e.origin_warehouse.name,responsible:e.user.name}))),this.sortedMovements=this.sortMovements()})).catch((e=>{console.log(e)})),ee.Z.get(te+"/most_removed_items").then((e=>{console.log(e.data),this.productos=e.data.map((e=>({item_id:e.id,name:e.name,removals:e.quantity_removed,category:e.category_name}))),this.productosClone=this.productos,this.createChartTop10(),this.filterProductos()})).catch((e=>{console.log(e)})),ee.Z.get(te+"/low_stock_items").then((e=>{this.productosLow=e.data.map((e=>({item_id:e.item_id,name:e.name,storing_format_units:e.storing_format_units,warehouse:e.warehouse.name,warehouseComplete:e.warehouse,minimal_stock:e.minimal_stock,category:e.category}))),this.productosLowClone=this.productosLow,this.createChartLow(),this.filterProductos()})).catch((e=>{console.log(e)}))},methods:{...(0,r.OI)(["toggleCheckboxValue"]),sortMovements(){return[...this.movementsData].sort(((e,t)=>new Date(t.date)-new Date(e.date)))},createChartTop10(){const e=this.$refs.chartCanvas,t=e.getContext("2d");let a=[...this.productos].sort(((e,t)=>t.removals-e.removals)),s=a.map((e=>e.name)),n=a.map((e=>e.removals));this.chartTop10=(0,o.XI)(new X.ZP(t,{type:"bar",data:{labels:s,datasets:[{label:"Salidas de inventario",data:n,backgroundColor:"rgba(37, 168, 150, 0.5)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1}]},options:{indexAxis:"y",responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{beginAtZero:!0,ticks:{precision:0}},y:{grid:{display:!1}}}}}))},createChartLow(){const e=this.$refs.chartLow,t=e.getContext("2d"),a=[...this.productosLow].sort(((e,t)=>e.storing_format_units-t.storing_format_units)),s=a.map((e=>e.name)),n=a.map((e=>e.storing_format_units)),r=a.map((e=>e.minimal_stock));this.chartLow=(0,o.XI)(new X.ZP(t,{type:"bar",data:{labels:s,datasets:[{label:"Nivel actual de stock",data:n,backgroundColor:"rgba(250, 10, 10, 0.5)",borderColor:"rgba(70, 70, 70, 1)",borderWidth:1},{label:"Nivel deseado",data:r,backgroundColor:"rgba(10, 10, 255, 0.5)",borderColor:"rgba(70, 70, 70, 1)",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{grid:{display:!1}},y:{beginAtZero:!0,ticks:{precision:0}}}}}))},filterProductos(){this.productos=this.productosClone,this.productosLow=this.productosLowClone;let e=[...this.productos],t=[...this.productosLow];this.selectedTipo&&(e=e.filter((e=>e.category===this.selectedTipo))),this.selectedBodega&&(t=t.filter((e=>e.warehouse===this.selectedBodega))),this.selectedTipo&&(t=t.filter((e=>e.category===this.selectedTipo))),this.productos=e,this.productosLow=t,this.updateChartLow(),this.updateChartTop10()},mismaBodega(e){if(0===e.length)return!1;const t=e[0].warehouse;for(let a=1;a<e.length;a++)if(e[a].warehouse!==t)return!1;return!0},hacerEntrada(){const e=this.selectedProductos.map((e=>e.item_id));this.$store.commit("setSelectedItems",e),this.$store.commit("setWarehouse",this.selectedProductos[0].warehouseComplete),console.log(e);const t=this.selectedProductos[0].warehouse;this.$router.push({name:"Entry-from-home",params:{warehouse:t}})},updateChartTop10(){if(this.chartTop10){const e=[...this.productos].sort(((e,t)=>t.removals-e.removals)),t=e.map((e=>e.name)),a=e.map((e=>e.removals));this.chartTop10.data.labels=t,this.chartTop10.data.datasets[0].data=a,this.chartTop10.update()}},updateChartLow(){if(this.chartLow){const e=[...this.productosLow].sort(((e,t)=>e.storing_format_units-t.storing_format_units)),t=e.map((e=>e.name)),a=e.map((e=>e.storing_format_units)),s=e.map((e=>e.minimal_stock));this.chartLow.data.labels=t,this.chartLow.data.datasets[0].data=a,this.chartLow.data.datasets[1].data=s,this.chartLow.update()}}}},re=a(89);const ie=(0,re.Z)(ne,[["render",J],["__scopeId","data-v-37764d84"]]);var le=ie,ce=a.p+"img/usuario.4bbfa617.png";const de=e=>((0,c.dD)("data-v-30f5b5c8"),e=e(),(0,c.Cn)(),e),ue={class:"container"},me={class:"row justify-content-center"},he={class:"col-md-6"},_e={class:"card",style:{"border-radius":"15px"}},ge={class:"card-body text-center"},pe=de((()=>(0,c._)("div",{class:"logo-container"},[(0,c._)("img",{src:ce,alt:"Logo",class:"logo"})],-1))),be={class:"mb-3"},fe={class:"form-group"},ve=de((()=>(0,c._)("label",{for:"email"},"Email:",-1))),we=["value"],ye={class:"form-group mt-4"},ke=de((()=>(0,c._)("label",{for:"currentPassword"},"Contraseña actual:",-1))),Ce={class:"form-group mt-4"},xe=de((()=>(0,c._)("label",{for:"newPassword"},"Nueva contraseña:",-1))),De={class:"form-group mt-4"},Ie=de((()=>(0,c._)("label",{for:"passwordConfirmation"},"Confirmar nueva contraseña:",-1))),Se=de((()=>(0,c._)("div",{class:"mt-4"},[(0,c._)("button",{type:"submit",class:"btn btn-primary btn-block"}," Cambiar contraseña ")],-1)));function Oe(e,t,a,o,n,r){return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c.wy)((0,c._)("input",{type:"checkbox",id:"check","onUpdate:modelValue":t[0]||(t[0]=e=>r.checked=e),onChange:t[1]||(t[1]=(...e)=>r.handleCheckboxChange&&r.handleCheckboxChange(...e))},null,544),[[s.e8,r.checked]]),(0,c._)("div",ue,[(0,c._)("div",me,[(0,c._)("div",he,[(0,c._)("div",_e,[(0,c._)("div",ge,[pe,(0,c._)("h4",be,"Hola de nuevo, "+(0,d.zw)(n.user.name),1),(0,c._)("form",{onSubmit:t[5]||(t[5]=(0,s.iM)(((...e)=>r.changePassword&&r.changePassword(...e)),["prevent"]))},[(0,c._)("div",fe,[ve,(0,c._)("input",{type:"email",id:"email",class:"form-control",value:n.user.email,readonly:""},null,8,we)]),(0,c._)("div",ye,[ke,(0,c.wy)((0,c._)("input",{type:"password",id:"currentPassword",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>n.current_password=e)},null,512),[[s.nr,n.current_password]])]),(0,c._)("div",Ce,[xe,(0,c.wy)((0,c._)("input",{type:"password",id:"newPassword",class:"form-control","onUpdate:modelValue":t[3]||(t[3]=e=>n.new_password=e)},null,512),[[s.nr,n.new_password]])]),(0,c._)("div",De,[Ie,(0,c.wy)((0,c._)("input",{type:"password",id:"passwordConfirmation",class:"form-control","onUpdate:modelValue":t[4]||(t[4]=e=>n.new_password_confirmation=e)},null,512),[[s.nr,n.new_password_confirmation]])]),Se],32)])])])])])],64)}var Ve={name:"MyComponent",data(){return{user:{},current_password:"",new_password:"",new_password_confirmation:""}},computed:{...(0,r.rn)(["checkboxValue"]),checked:{get(){return this.checkboxValue}}},methods:{...(0,r.OI)(["toggleCheckboxValue"]),handleCheckboxChange(){this.toggleCheckboxValue()},changePassword(){if(this.new_password===this.new_password_confirmation){const e={headers:{Authorization:this.sessionToken}},t={email:this.user.email,current_password:this.current_password,new_password:this.new_password,password_confirmation:this.new_password_confirmation};ee.Z.put(`${te}/users/password`,t,e).then((e=>{ae.Am.success("Contraseña actualizada",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}),console.log(e)})).catch((e=>{ae.Am.error("No se pudo actualizar la contraseña",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}),console.log(e)}))}else ae.Am.error("Las contraseñas no coinciden",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0})}},mounted(){this.$state.navbarTitle="Perfil de usuario",this.user=JSON.parse(localStorage.getItem("user")),this.checked=this.checkboxValue,this.sessionToken=localStorage.getItem("sessionToken")}};const Ae=(0,re.Z)(Ve,[["render",Oe],["__scopeId","data-v-30f5b5c8"]]);var Te=Ae;const $e={key:0};function Ue(e,t,a,s,o,n){const r=(0,c.up)("navbar"),i=(0,c.up)("sidebar"),l=(0,c.up)("router-view");return(0,c.wg)(),(0,c.iD)(c.HY,null,[n.isLoggedIn?((0,c.wg)(),(0,c.iD)("div",$e,[(0,c.Wm)(r),(0,c.Wm)(i)])):(0,c.kq)("",!0),(0,c.Wm)(l)],64)}const Le={class:"sidebar"},je=["id","href","title","onClick"],ze={id:"desktopText"},Ee=(0,c._)("input",{type:"checkbox",id:"checkElements"},null,-1),Be=(0,c._)("label",{for:"checkElements"},[(0,c._)("i",{class:"fas fa-times",id:"cancelElements"},[(0,c._)("i",{class:"bi bi-arrow-return-left"})])],-1),He={id:"sidebarElements",class:"sidebarElements"},We=["id","onClick"],Ze={id:"option"};function Pe(e,t,a,o,n,r){return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c.wy)((0,c._)("input",{type:"checkbox",id:"check","onUpdate:modelValue":t[0]||(t[0]=e=>r.checked=e),onChange:t[1]||(t[1]=(...e)=>r.handleCheckboxChange&&r.handleCheckboxChange(...e))},null,544),[[s.e8,r.checked]]),(0,c._)("div",Le,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(n.pages,((e,t)=>((0,c.wg)(),(0,c.iD)("a",{id:e.link.id,key:t,class:(0,d.C_)({active:n.activePage===t}),href:`./${e.link.linkTo}`,title:`Ir a la página de ${e.link.title}`,onClick:[t=>r.manageClick(e.link.id,e.link.linkTo),(0,s.iM)((e=>n.activePage=t),["prevent"])]},[(0,c._)("i",{id:"mobileIcon",class:(0,d.C_)(e.link.bootstrapIcon.class)},[(0,c._)("span",null,(0,d.zw)(e.link.text),1)],2),(0,c._)("span",ze,[(0,c._)("i",{id:"desktopIcon",class:(0,d.C_)(e.link.bootstrapIcon.class)},null,2),(0,c.Uk)(" "+(0,d.zw)(e.link.text),1)])],10,je)))),128))]),Ee,Be,(0,c._)("div",He,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(n.adminElementsList,((e,t)=>((0,c.wg)(),(0,c.iD)("a",{id:e.element,key:t,class:(0,d.C_)({active:n.activePage===t}),onClick:[t=>r.performElementsAction(e.urlParam),(0,s.iM)((e=>n.activePage=t),["prevent"])]},[(0,c._)("span",Ze,[(0,c._)("i",{class:(0,d.C_)(e.bootstrapIconClass)},null,2),(0,c.Uk)(" "+(0,d.zw)(e.element),1)])],10,We)))),128))])],64)}var Fe=a(2492),Me=a.n(Fe),qe={data(){return{token:"",limit:700,screenWidth:0,screenHeight:0,isDesktop:!1,activePage:0,pages:[{link:{id:"home",text:"Inicio",title:"inicio",linkTo:"home",bootstrapIcon:{class:"bi bi-house-fill"}}},{link:{id:"inventario",text:"Consulta de Inventario",title:"consulta de inventario",linkTo:"inventory",bootstrapIcon:{class:"bi bi-box-seam"}}},{link:{id:"entrada",text:"Entradas de Inventario",title:"entradas de inventario",linkTo:"entry",bootstrapIcon:{class:"bi bi-box-arrow-in-left"}}},{link:{id:"salida",text:"Salidas de Inventario",title:"salidas de inventario",linkTo:"output",bootstrapIcon:{class:"bi bi-box-arrow-right"}}},{link:{id:"transferencia",text:"Transferencias de Inventario",title:"Transferencias de inventario",linkTo:"transfer",bootstrapIcon:{class:"bi bi-arrow-left-right"}}},{link:{id:"usuarios",text:"Administrar usuarios",title:"administrar usuarios",linkTo:"users",bootstrapIcon:{class:"bi bi-people-fill"}}},{link:{id:"transactions",text:"Registro de movimientos",title:"registro de movimientos",linkTo:"transactions",bootstrapIcon:{class:"bi bi-folder-fill"}}},{link:{id:"administrarElementos",text:"Catalogo",title:"administrar elementos",linkTo:"adminElementos",bootstrapIcon:{class:"bi bi-pencil-square"}}},{link:{id:"exit-item",text:"Cerrar sesión",title:"Salir",linkTo:"login",bootstrapIcon:{class:"bi bi-door-closed-fill"}}}],adminElementsList:[{element:"Artículo",bootstrapIconClass:"bi bi-bag-fill",urlParam:"items"},{element:"Categoría",bootstrapIconClass:"bi bi-bookmark-fill",urlParam:"categories"},{element:"Subcategoría",bootstrapIconClass:"bi bi-bookmarks-fill",urlParam:"subcategories"},{element:"Diseño",bootstrapIconClass:"bi bi-brush-fill",urlParam:"designs"},{element:"Marca",bootstrapIconClass:"bi bi-tag-fill",urlParam:"brands"},{element:"Bodega",bootstrapIconClass:"bi bi-buildings-fill",urlParam:"warehouses"}]}},mounted(){this.token=localStorage.getItem("sessionToken")},computed:{...(0,r.rn)(["checkboxValue"]),checked:{get(){return this.checkboxValue}}},created(){this.updateScreenSize(),window.addEventListener("resize",this.updateScreenSize)},unmounted(){window.removeEventListener("resize",this.updateScreenSize)},methods:{manageClick(e,t){"exit-item"===e?this.logout():this.action(t)},logout(){Me().fire({icon:"question",title:"Cerrar sesión",text:"¿Estás seguro de que deseas cerrar sesión?",showCancelButton:!0,confirmButtonText:"Sí",cancelButtonText:"No"}).then((e=>{if(e.isConfirmed){const e={headers:{Authorization:`${this.token}`}};ee.Z.delete(`${te}/users/sign_out`,e).then((e=>{console.log(e)})).catch((e=>{console.log(e)}))}localStorage.removeItem("token"),this.$store.commit("setLoggedIn",!1),this.$router.push("/login")}))},...(0,r.OI)(["toggleCheckboxValue"]),handleCheckboxChange(){this.toggleCheckboxValue()},updateScreenSize(){this.screenWidth=window.innerWidth,this.screenHeight=window.innerHeight,this.Desktop()},Desktop(){this.isDesktop=this.screenWidth>=this.limit},action(e){"adminElementos"===e?document.getElementById("checkElements").checked=!0:this.$router.push("/"+e)},performElementsAction(e){this.$router.push("/"+e),document.getElementById("checkElements").checked=!1}}};const Ne=(0,re.Z)(qe,[["render",Pe]]);var Ye=Ne,Ke=a.p+"img/logo_telas.cfcaff10.jpg";const Re={class:"nav-wrapper",style:{height:"110px"}},Qe=(0,c._)("div",{class:"burger-container"},[(0,c._)("label",{for:"check"},[(0,c._)("i",{class:"fas fa-bars",id:"btn"},[(0,c._)("i",{class:"bi bi-list"})])])],-1),Ge={class:"logo-container"},Je={class:"title-wrapper"},Xe={class:"navbar-title"},et={class:"logo-usuario-container"};function tt(e,t,a,s,o,n){return(0,c.wg)(),(0,c.iD)("div",Re,[(0,c._)("nav",{class:(0,d.C_)(["navbar navbar-expand-lg",{sticky:o.isSticky}])},[Qe,(0,c._)("div",Ge,[(0,c._)("img",{id:"logotelas",src:Ke,onClick:t[0]||(t[0]=e=>n.NavigateToAnotherPage("home")),alt:"logo"})]),(0,c._)("div",Je,[(0,c._)("h1",Xe,(0,d.zw)(e.$state.navbarTitle),1)]),(0,c._)("div",et,[(0,c._)("i",{id:"logousuario",class:"bi bi-person-circle",onClick:t[1]||(t[1]=e=>n.NavigateToAnotherPage("userProfile"))})])],2)])}var at={data(){return{isSticky:!1,showWarehouseDropdown:!1,selectedWarehouse:null,warehouses:""}},mounted(){ee.Z.get(te+"/warehouses").then((e=>{this.warehouses=e.data})),window.addEventListener("scroll",this.handleScroll)},beforeUnmount(){window.removeEventListener("scroll",this.handleScroll)},methods:{NavigateToAnotherPage(e){this.$router.push("/"+e)},toggleWarehouseDropdown(){this.showWarehouseDropdown=!this.showWarehouseDropdown},selectWarehouse(e){this.selectedWarehouse=e,this.showWarehouseDropdown=!1},updateNavbarTitle(e){this.$store.commit("updateNavbarTitle",e)},handleScroll(){this.isSticky=window.scrollY>0}}};const st=(0,re.Z)(at,[["render",tt]]);var ot=st,nt={name:"App",components:{sidebar:Ye,navbar:ot},data(){return{username:"",password:""}},mounted(){},computed:{isLoggedIn(){return this.$store.state.isLoggedIn}},methods:{}};const rt=(0,re.Z)(nt,[["render",Ue]]);var it=rt;const lt=e=>((0,c.dD)("data-v-355cc1c0"),e=e(),(0,c.Cn)(),e),ct={class:"container"},dt={key:0},ut=lt((()=>(0,c._)("div",{class:"modal-background"},null,-1))),mt={class:"modal-content container-md",style:{"z-index":"1"}},ht=lt((()=>(0,c._)("h2",null,"Búsqueda de artículos",-1))),_t={class:"search-container"},gt=lt((()=>(0,c._)("label",{for:"searchInput"},"Buscar por Nombre o Código:",-1))),pt={class:"table-container"},bt={class:"table"},ft=lt((()=>(0,c._)("thead",null,[(0,c._)("tr",null,[(0,c._)("th",{class:"text-center"},"Código del artículo"),(0,c._)("th",{class:"text-center"},"Nombre del artículo"),(0,c._)("th",{class:"text-center"})])],-1))),vt={style:{width:"10px"}},wt=["id","value","onChange"],yt={class:"row"},kt={class:"btn-group"},Ct={class:"document-header"},xt={class:"header-row"},Dt=lt((()=>(0,c._)("h1",{class:"text-center mb-5"},"Entrada",-1))),It={class:"ms-0"},St={class:"row mb-lg-5"},Ot={class:"col-1"},Vt=["hidden"],At=["hidden"],Tt=lt((()=>(0,c._)("option",{value:"",disabled:""},"Seleccionar",-1))),$t=["value"],Ut=["hidden"],Lt=lt((()=>(0,c._)("h4",null,"Lista de Artículos",-1))),jt={class:"table-container"},zt={class:"table"},Et=lt((()=>(0,c._)("thead",null,[(0,c._)("tr",null,[(0,c._)("th",{class:"text-center"},"Código del artículo"),(0,c._)("th",{class:"text-center"},"Nombre del artículo"),(0,c._)("th",{class:"text-center"},"Cantidad en unidades de inventario a agregar"),(0,c._)("th",{class:"text-center"},"Unidades"),(0,c._)("th",{class:"text-center"},"Cantidad en unidades de venta a agregar"),(0,c._)("th",{class:"text-center"},"Unidades"),(0,c._)("th",{class:"text-center"},"Acciones")])],-1))),Bt=["id","onUpdate:modelValue","onKeydown"],Ht=["onUpdate:modelValue"],Wt={class:"text-center"},Zt=["id","onUpdate:modelValue","onInput"],Pt={class:"text-center"},Ft={class:"text-center"},Mt=["onUpdate:modelValue","onInput"],qt={class:"text-center"},Nt={class:"text-center"},Yt=["onClick"],Kt={class:"observations-section mt-4"},Rt=lt((()=>(0,c._)("h4",null,"Observaciones",-1))),Qt={class:"form-footer text-center"};function Gt(e,t,a,o,n,r){return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c.wy)((0,c._)("input",{type:"checkbox",id:"check","onUpdate:modelValue":t[0]||(t[0]=e=>r.checked=e),onChange:t[1]||(t[1]=(...e)=>r.handleCheckboxChange&&r.handleCheckboxChange(...e))},null,544),[[s.e8,r.checked]]),(0,c._)("div",ct,[(0,c._)("div",null,[n.modalVisible?((0,c.wg)(),(0,c.iD)("div",dt,[ut,(0,c._)("div",mt,[ht,(0,c._)("div",_t,[gt,(0,c.wy)((0,c._)("input",{type:"text",id:"searchInput","onUpdate:modelValue":t[2]||(t[2]=t=>e.searchQuery=t),onKeydown:t[3]||(t[3]=(0,s.D2)(((...e)=>r.searchItem&&r.searchItem(...e)),["enter"])),class:"form-control"},null,544),[[s.nr,e.searchQuery]]),(0,c._)("button",{onClick:t[4]||(t[4]=(...e)=>r.searchItem&&r.searchItem(...e)),class:"btn btn-success"},"Buscar")]),(0,c._)("div",pt,[(0,c._)("table",bt,[ft,(0,c._)("tbody",null,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(n.filteredItems,(e=>((0,c.wg)(),(0,c.iD)("tr",{key:e.id,class:(0,d.C_)({"table-row-selected":e.isSelected})},[(0,c._)("td",null,(0,d.zw)(e.id),1),(0,c._)("td",null,(0,d.zw)(e.name),1),(0,c._)("td",vt,[(0,c.wy)((0,c._)("input",{type:"checkbox",id:e.id,value:e,"onUpdate:modelValue":t[5]||(t[5]=e=>n.selectedItems=e),class:"form-check-input",onChange:t=>r.handleItemCheckboxChange(e)},null,40,wt),[[s.e8,n.selectedItems]])])],2)))),128))])])]),(0,c._)("div",yt,[(0,c._)("div",kt,[(0,c._)("button",{class:"btn btn-danger",onClick:t[6]||(t[6]=(...e)=>r.closeModal&&r.closeModal(...e))},"Cerrar"),(0,c._)("button",{class:"btn btn-success",onClick:t[7]||(t[7]=(...e)=>r.addSelectedItems&&r.addSelectedItems(...e))},"Agregar")])])])])):(0,c.kq)("",!0)]),(0,c._)("div",Ct,[(0,c._)("div",xt,[Dt,(0,c._)("div",It,[(0,c._)("p",null,"Fecha: "+(0,d.zw)(r.getCurrentDate()),1),(0,c._)("p",null,"Hora: "+(0,d.zw)(r.getCurrentTime()),1),(0,c._)("p",null,"Usuario: "+(0,d.zw)(this.$store.state.user.name),1),(0,c._)("div",St,[(0,c._)("div",Ot,[(0,c._)("label",{for:"warehouseSelect",hidden:e.selectDisabled},"Bodega:",8,Vt)]),(0,c._)("div",{class:"col-11",hidden:e.selectDisabled},[(0,c.wy)((0,c._)("select",{id:"warehouseSelect",class:"form-select ms-2","onUpdate:modelValue":t[8]||(t[8]=e=>n.selectedWarehouse=e)},[Tt,((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(n.warehouses,(e=>((0,c.wg)(),(0,c.iD)("option",{value:e,key:e.id},(0,d.zw)(e.name),9,$t)))),128))],512),[[s.bM,n.selectedWarehouse]])],8,At),(0,c._)("div",null,[(0,c._)("label",{hidden:!e.selectDisabled},"Bodega seleccionada: "+(0,d.zw)(n.selectedWarehouse.name),9,Ut)])])])])]),Lt,(0,c._)("div",jt,[(0,c._)("table",zt,[Et,(0,c._)("tbody",null,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(n.tableData,((e,t)=>((0,c.wg)(),(0,c.iD)("tr",{key:t,class:(0,d.C_)({"table-row-selected":e.selected})},[(0,c._)("td",null,[(0,c.wy)((0,c._)("input",{id:"ID"+t,type:"text","onUpdate:modelValue":t=>e.item_id=t,onKeydown:(0,s.D2)((a=>r.onCellInput(e,"item_id",a,t)),["tab"]),class:"form-control"},null,40,Bt),[[s.nr,e.item_id]])]),(0,c._)("td",null,[(0,c.wy)((0,c._)("input",{type:"text","onUpdate:modelValue":t=>e.name=t,class:"form-control",readonly:""},null,8,Ht),[[s.nr,e.name]])]),(0,c._)("td",null,[(0,c._)("div",Wt,[(0,c.wy)((0,c._)("input",{type:"number",id:"SU"+t,"onUpdate:modelValue":t=>e.storing_format_units=t,onInput:t=>r.onCellInput(e,"storing_format_units",t),class:"form-control"},null,40,Zt),[[s.nr,e.storing_format_units]])])]),(0,c._)("td",null,[(0,c._)("div",Pt,(0,d.zw)(e.storing_unit_format_name),1)]),(0,c._)("td",null,[(0,c._)("div",Ft,[(0,c.wy)((0,c._)("input",{type:"number","onUpdate:modelValue":t=>e.transferring_format_units=t,onInput:t=>r.onCellInput(e,"transferring_format_units",t),class:"form-control"},null,40,Mt),[[s.nr,e.transferring_format_units]])])]),(0,c._)("td",null,[(0,c._)("div",qt,(0,d.zw)(e.transferring_unit_format_name),1)]),(0,c._)("td",Nt,[(0,c._)("button",{class:"btn btn-danger",onClick:e=>r.removeItem(t)}," Eliminar ",8,Yt)])],2)))),128))])])]),(0,c._)("div",Kt,[Rt,(0,c.wy)((0,c._)("textarea",{class:"form-control","onUpdate:modelValue":t[9]||(t[9]=e=>n.notes=e)},null,512),[[s.nr,n.notes]])]),(0,c._)("div",Qt,[(0,c._)("button",{class:"btn btn-success",type:"submit",onClick:t[10]||(t[10]=(...e)=>r.saveTransaction&&r.saveTransaction(...e))}," Guardar ")])])],64)}var Jt={data(){return{tableData:[],filteredItems:[],inventory_items:[],warehouses:[],modalVisible:!1,selectedWarehouse:"",selectedItems:[],notes:""}},mounted(){if(this.$state.navbarTitle="Entradas de inventario",document.addEventListener("keydown",this.handleKeyDown),ee.Z.get(`${te}/warehouses/`).then((e=>{this.warehouses=e.data})).catch((e=>{console.error(e)})),this.addItem(),window.location.href.includes("Entry-from-home")){this.selectedWarehouse=this.$store.state.warehouseSend,console.log(),this.selectDisabled=!0;let e=this.$store.state.selectedItems;for(let t=0;t<e.length;t++){let a={};a.item_id=e[t],this.addItem(0,a)}this.$store.commit("setSelectedItems",{})}},beforeUnmount(){document.removeEventListener("keydown",this.handleKeyDown)},computed:{...(0,r.rn)(["checkboxValue"]),checked:{get(){return this.checkboxValue}}},methods:{...(0,r.OI)(["toggleCheckboxValue"]),handleCheckboxChange(){this.toggleCheckboxValue()},handleItemCheckboxChange(e){e.isSelected=!e.isSelected},updateWarehouse(e,t){e.warehouse=t},showModal(){this.modalVisible=!0},closeModal(){this.modalVisible=!1},addSelectedItems(){this.selectedItems.forEach((e=>{this.addItem(0,e)})),this.selectedItems=[],this.closeModal()},addItem(e,t){if(t){const a=null==t.item_id?t.id:t.item_id.trim();if(""!==a){let s=`${te}/search_inventory_item?`;""!==a&&(s+=`item_id=${a}`),ee.Z.get(s).then((a=>{const s=a.data;t.item_id=s.item_id||"",t.name=s.name||"",t.storing_unit_format_name=s.storing_unit_format_name||"",t.conversion_factor=s.conversion_factor||"",t.transferring_unit_format_name=s.transferring_unit_format_name||"",this.calculateSaleUnits(t),this.tableData.splice(1,0,t),this.tableData.splice(0,1,{item_id:"",name:"",storing_format_units:"",storing_unit_format_name:"",transferring_format_units:"",transferring_unit_format_name:""}),this.$nextTick((()=>{const t=document.getElementById(`SU${e+1}`);t&&t.focus()}))})).catch((e=>{const t=e.response.data.error;500!==e.response.status&&t?ae.Am.error(t,{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}):console.error(e)}))}}else this.tableData.unshift({item_id:"",name:"",storing_format_units:"",storing_unit_format_name:"",transferring_format_units:"",transferring_unit_format_name:""});this.modalVisible&&this.closeModal()},checkUnits(e){return""!==e.transferring_format_units||""!==e.storing_format_units},removeItem(e){0!==e&&this.tableData.splice(e,1)},searchItem(){const e=void 0===this.searchQuery?"":this.searchQuery.trim();if(""!==e){const t=`${te}/search_items/?data=${e}`;ee.Z.get(t).then((e=>{console.log(e),this.filteredItems=e.data})).catch((e=>{console.error(e)}))}},onCellInput(e,t,a,s){a.stopPropagation(),a.preventDefault(),e[t]=a.target.value,"Tab"===a.key&&"item_id"===t?e===this.tableData[0]&&"item_id"===t&&""!==e.item_id.trim()&&this.addItem(s,e):"storing_format_units"===t||"conversion_factor"===t?this.calculateSaleUnits(e):"Enter"===a.key&&""===this.selectedWarehouse?ae.Am.info("Debe seleccionar un almacén",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}):"Enter"===a.key&&this.saveTransaction()},calculateSaleUnits(e){const t=parseFloat(e.storing_format_units),a=parseFloat(e.conversion_factor);if(!isNaN(t)&&!isNaN(a)){const s=t*a;e.transferring_format_units=s.toFixed(2)}},saveTransaction(){if(this.inventory_items=this.tableData.filter((e=>""!==e.item_id.trim()&&""!==e.name.trim()&&""!==e.storing_format_units&&""!==e.transferring_format_units)),""===this.selectedWarehouse)ae.Am.info("Debe seleccionar un almacén",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0});else if(this.inventory_items.forEach((e=>{if(!this.checkUnits(e))return ae.Am.info("Debe ingresar las unidades de almacenamiento a todos los artículos agregados",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}),""})),this.inventory_items.length>0){const e=`${te}/inventories/insert_items`,t={inventory_items:this.inventory_items,currentDate:this.getCurrentDate(),warehouse_id:this.selectedWarehouse?this.selectedWarehouse.id:null,user:this.$store.state.user.id,notes:this.notes};ee.Z.post(e,t).then((e=>{console.log(e),ae.Am.success("Transacción guardada",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}),this.tableData=[],this.addItem(),this.notes="",this.selectedWarehouse=""})).catch((e=>{ae.Am.error("Error al guardar la transacción: "+e.message,{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0})}))}else ae.Am.info("Debe llenar todos los campos en al menos una fila antes de guardar la transacción",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0});this.inventory_items=[]},getCurrentDate(){const e=new Date,t=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getFullYear()).slice(-2);return`${t}-${a}-${s}`},getCurrentTime(){const e=new Date;return e.toLocaleTimeString("en-US",{timeStyle:"medium"})},handleKeyDown(e){e.shiftKey&&"Tab"===e.key&&this.showModal()}}};const Xt=(0,re.Z)(Jt,[["render",Gt],["__scopeId","data-v-355cc1c0"]]);var ea=Xt;const ta=e=>((0,c.dD)("data-v-2bfdf433"),e=e(),(0,c.Cn)(),e),aa={class:"container"},sa={key:0},oa=ta((()=>(0,c._)("div",{class:"modal-background"},null,-1))),na={class:"modal-content container-md",style:{"z-index":"1"}},ra=ta((()=>(0,c._)("h2",null,"Búsqueda de artículos",-1))),ia={class:"search-container"},la=ta((()=>(0,c._)("label",{for:"searchInput"},"Buscar por Nombre o Código:",-1))),ca={class:"table-container"},da={class:"table"},ua=ta((()=>(0,c._)("thead",null,[(0,c._)("tr",null,[(0,c._)("th",{class:"text-center"},"Código del artículo"),(0,c._)("th",{class:"text-center"},"Nombre del artículo"),(0,c._)("th",{class:"text-center"})])],-1))),ma={style:{width:"10px"}},ha=["id","value","onChange"],_a={class:"document-header"},ga={class:"header-row"},pa=ta((()=>(0,c._)("h1",{class:"text-center mb-5"},"Transferencias",-1))),ba={class:"ms-0"},fa={class:"row"},va=ta((()=>(0,c._)("div",{class:"col-2"},[(0,c._)("label",{for:"senderWarehouse"},"Bodega de origen:")],-1))),wa={class:"col-10"},ya=ta((()=>(0,c._)("option",{value:"",disabled:"",selected:""},"Seleccionar",-1))),ka=["value"],Ca={class:"row mt-1"},xa=ta((()=>(0,c._)("div",{class:"col-2"},[(0,c._)("label",{for:"receiverWarehouse"},"Bodega de destino:")],-1))),Da={class:"col-10"},Ia=ta((()=>(0,c._)("option",{value:"",disabled:"",selected:""},"Seleccionar",-1))),Sa=["value"],Oa=ta((()=>(0,c._)("h4",null,"Lista de Artículos",-1))),Va={class:"table-container"},Aa={class:"table table-hover"},Ta=ta((()=>(0,c._)("thead",null,[(0,c._)("tr",null,[(0,c._)("th",{class:"text-center"},"Código del artículo"),(0,c._)("th",{class:"text-center"},"Nombre del artículo"),(0,c._)("th",{class:"text-center"},"Cantidad en unidades de inventario a transferir"),(0,c._)("th",{class:"text-center"},"Unidades"),(0,c._)("th",{class:"text-center"},"Cantidad en unidades de venta a transferir"),(0,c._)("th",{class:"text-center"},"Unidades"),(0,c._)("th",{class:"text-center"},"Acciones")])],-1))),$a=["id","onUpdate:modelValue","onKeydown"],Ua=["onUpdate:modelValue"],La={class:"text-center"},ja=["id","onUpdate:modelValue","onInput"],za={class:"text-center"},Ea={class:"text-center"},Ba=["onUpdate:modelValue","onInput"],Ha={class:"text-center"},Wa={class:"text-center"},Za=["onClick"],Pa={class:"observations-section mt-4"},Fa=ta((()=>(0,c._)("h4",null,"Observaciones",-1))),Ma={class:"form-footer text-center"};function qa(e,t,a,o,n,r){return(0,c.wg)(),(0,c.iD)("div",null,[(0,c.wy)((0,c._)("input",{type:"checkbox",id:"check","onUpdate:modelValue":t[0]||(t[0]=e=>r.checked=e),onChange:t[1]||(t[1]=(...e)=>r.handleCheckboxChange&&r.handleCheckboxChange(...e))},null,544),[[s.e8,r.checked]]),(0,c._)("div",aa,[(0,c._)("div",null,[n.modalVisible?((0,c.wg)(),(0,c.iD)("div",sa,[oa,(0,c._)("div",na,[ra,(0,c._)("div",ia,[la,(0,c.wy)((0,c._)("input",{type:"text",id:"searchInput","onUpdate:modelValue":t[2]||(t[2]=t=>e.searchQuery=t),onKeydown:t[3]||(t[3]=(0,s.D2)(((...e)=>r.searchItem&&r.searchItem(...e)),["enter"])),class:"form-control"},null,544),[[s.nr,e.searchQuery]]),(0,c._)("button",{onClick:t[4]||(t[4]=(...e)=>r.searchItem&&r.searchItem(...e)),class:"btn btn-success"},"Buscar")]),(0,c._)("div",ca,[(0,c._)("table",da,[ua,(0,c._)("tbody",null,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(n.filteredItems,(e=>((0,c.wg)(),(0,c.iD)("tr",{key:e.id,class:(0,d.C_)({"table-row-selected":e.isSelected})},[(0,c._)("td",null,(0,d.zw)(e.id),1),(0,c._)("td",null,(0,d.zw)(e.name),1),(0,c._)("td",ma,[(0,c.wy)((0,c._)("input",{type:"checkbox",id:e.id,value:e,"onUpdate:modelValue":t[5]||(t[5]=e=>n.selectedItems=e),class:"form-check-input",onChange:t=>r.handleItemCheckboxChange(e)},null,40,ha),[[s.e8,n.selectedItems]])])],2)))),128))])])]),(0,c._)("button",{onClick:t[6]||(t[6]=(...e)=>r.closeModal&&r.closeModal(...e)),class:"btn btn-danger"},"Cerrar"),(0,c._)("button",{onClick:t[7]||(t[7]=(...e)=>r.addSelectedItems&&r.addSelectedItems(...e)),class:"btn btn-success"},"Agregar")])])):(0,c.kq)("",!0)]),(0,c._)("div",_a,[(0,c._)("div",ga,[pa,(0,c._)("div",ba,[(0,c._)("p",null,"Fecha: "+(0,d.zw)(r.getCurrentDate()),1),(0,c._)("p",null,"Hora: "+(0,d.zw)(r.getCurrentTime()),1),(0,c._)("p",null,"Usuario: "+(0,d.zw)(e.user.name),1),(0,c._)("div",fa,[va,(0,c._)("div",wa,[(0,c.wy)((0,c._)("select",{id:"senderWarehouse",class:"form-select ms-2","onUpdate:modelValue":t[8]||(t[8]=e=>n.senderWarehouse=e)},[ya,((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(r.filteredSenderWarehouses,(e=>((0,c.wg)(),(0,c.iD)("option",{value:e,key:e.id},(0,d.zw)(e.name),9,ka)))),128))],512),[[s.bM,n.senderWarehouse]])])]),(0,c._)("div",Ca,[xa,(0,c._)("div",Da,[(0,c.wy)((0,c._)("select",{id:"receiverWarehouse",class:"form-select ms-2","onUpdate:modelValue":t[9]||(t[9]=e=>n.receiverWarehouse=e)},[Ia,((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(r.filteredReceiverWarehouses,(e=>((0,c.wg)(),(0,c.iD)("option",{value:e,key:e.id},(0,d.zw)(e.name),9,Sa)))),128))],512),[[s.bM,n.receiverWarehouse]])])])])])]),Oa,(0,c._)("div",Va,[(0,c._)("table",Aa,[Ta,(0,c._)("tbody",null,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(n.tableData,((e,t)=>((0,c.wg)(),(0,c.iD)("tr",{key:t,class:(0,d.C_)({"table-row-selected":e.selected})},[(0,c._)("td",null,[(0,c.wy)((0,c._)("input",{id:"ID"+t,type:"text","onUpdate:modelValue":t=>e.item_id=t,onKeydown:(0,s.D2)((a=>r.onCellInput(e,"item_id",a,t)),["tab"]),class:"form-control"},null,40,$a),[[s.nr,e.item_id]])]),(0,c._)("td",null,[(0,c.wy)((0,c._)("input",{type:"text","onUpdate:modelValue":t=>e.name=t,class:"form-control",readonly:""},null,8,Ua),[[s.nr,e.name]])]),(0,c._)("td",null,[(0,c._)("div",La,[(0,c.wy)((0,c._)("input",{type:"number",id:"SU"+t,"onUpdate:modelValue":t=>e.storing_format_units=t,onInput:t=>r.onCellInput(e,"storing_format_units",t),class:"form-control"},null,40,ja),[[s.nr,e.storing_format_units]])])]),(0,c._)("td",null,[(0,c._)("div",za,(0,d.zw)(e.storing_unit_format_name),1)]),(0,c._)("td",null,[(0,c._)("div",Ea,[(0,c.wy)((0,c._)("input",{type:"number","onUpdate:modelValue":t=>e.transferring_format_units=t,onInput:t=>r.onCellInput(e,"transferring_format_units",t),class:"form-control"},null,40,Ba),[[s.nr,e.transferring_format_units]])])]),(0,c._)("td",null,[(0,c._)("div",Ha,(0,d.zw)(e.transferring_unit_format_name),1)]),(0,c._)("td",Wa,[(0,c._)("button",{class:"btn btn-danger",onClick:e=>r.removeItem(t)}," Eliminar ",8,Za)])],2)))),128))])])]),(0,c._)("div",Pa,[Fa,(0,c.wy)((0,c._)("textarea",{class:"form-control","onUpdate:modelValue":t[10]||(t[10]=e=>n.notes=e)},null,512),[[s.nr,n.notes]])]),(0,c._)("div",Ma,[(0,c._)("button",{class:"btn btn-success",type:"submit",onClick:t[11]||(t[11]=(...e)=>r.saveTransaction&&r.saveTransaction(...e))}," Guardar ")])])])}var Na={data(){return{tableData:[{item_id:"",name:"",storing_format_units:"",storing_unit_format_name:"",transferring_format_units:"",transferring_unit_format_name:""}],filteredItems:[],selectedItems:[],warehouses:[],modalVisible:!1,senderWarehouse:"",receiverWarehouse:"",notes:"",inventory_items:[]}},computed:{...(0,r.rn)(["checkboxValue","user"]),checked:{get(){return this.checkboxValue}},filteredSenderWarehouses(){return this.filterWarehouses("sender")},filteredReceiverWarehouses(){return this.filterWarehouses("receiver")}},mounted(){this.$state.navbarTitle="Transferencia de inventario",document.addEventListener("keydown",this.handleKeyDown),ee.Z.get(`${te}/warehouses/`).then((e=>{this.warehouses=e.data})).catch((e=>{console.error(e)}))},beforeUnmount(){document.removeEventListener("keydown",this.handleKeyDown)},methods:{...(0,r.OI)(["toggleCheckboxValue"]),filterWarehouses(e){return"sender"===e?this.warehouses.filter((e=>e!==this.receiverWarehouse)):"receiver"===e?this.warehouses.filter((e=>e!==this.senderWarehouse)):this.warehouses},handleCheckboxChange(){this.toggleCheckboxValue()},handleItemCheckboxChange(e){e.isSelected=!e.isSelected},showModal(){this.modalVisible=!0},closeModal(){this.modalVisible=!1},addSelectedItems(){this.selectedItems.forEach((e=>{this.addItem(0,e)})),this.selectedItems=[],this.closeModal()},addItem(e,t){if(t){const a=null==t.item_id?t.id:t.item_id.trim();if(""!==a){let s=`${te}/search_inventory_item?`;""!==a&&(s+=`item_id=${a}`),ee.Z.get(s).then((a=>{const s=a.data;t.item_id=s.item_id||"",t.name=s.name||"",t.storing_unit_format_name=s.storing_unit_format_name||"",t.conversion_factor=s.conversion_factor||"",t.transferring_unit_format_name=s.transferring_unit_format_name||"",this.calculateSaleUnits(t),this.tableData.splice(1,0,t),this.tableData.splice(0,1,{item_id:"",name:"",storing_format_units:"",storing_unit_format_name:"",transferring_format_units:"",transferring_unit_format_name:""}),this.$nextTick((()=>{const t=document.getElementById(`SU${e+1}`);t&&t.focus()}))})).catch((e=>{const t=e.response.data.error;500!==e.response.status&&t?ae.Am.error(t,{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}):console.error(e)}))}}else this.tableData.unshift({item_id:"",name:"",storing_format_units:"",storing_unit_format_name:"",transferring_format_units:"",transferring_unit_format_name:""});this.modalVisible&&this.closeModal()},checkUnits(e){return""!==e.transferring_format_units||""!==e.storing_format_units},removeItem(e){0!==e&&this.tableData.splice(e,1)},searchItem(){const e=void 0===this.searchQuery?"":this.searchQuery.trim();if(""!==e){const t=`${te}/search_items/?data=${e}`;ee.Z.get(t).then((e=>{console.log(e),this.filteredItems=e.data})).catch((e=>{console.error(e)}))}},onCellInput(e,t,a,s){a.stopPropagation(),a.preventDefault(),e[t]=a.target.value,"Tab"===a.key&&"item_id"===t?e===this.tableData[0]&&"item_id"===t&&""!==e.item_id.trim()&&this.addItem(s,e):"storing_format_units"===t||"conversion_factor"===t?this.calculateSaleUnits(e):"Enter"===a.key&&""===this.receiverWarehouse?ae.Am.info("Debe seleccionar un almacén de destino",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}):"Enter"===a.key&&this.saveTransaction()},calculateSaleUnits(e){const t=parseFloat(e.storing_format_units),a=parseFloat(e.conversion_factor);if(!isNaN(t)&&!isNaN(a)){const s=t*a;e.transferring_format_units=s.toFixed(2)}},saveTransaction(){if(this.inventory_items=this.tableData.filter((e=>""!==e.item_id.trim()&&""!==e.name.trim()&&""!==e.storing_format_units&&""!==e.transferring_format_units)),""===this.selectedWarehouse)ae.Am.info("Debe seleccionar un almacén",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0});else if(this.inventory_items.forEach((e=>{if(!this.checkUnits(e))return ae.Am.info("Debe ingresar las unidades de almacenamiento a todos los artículos agregados",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}),""})),this.inventory_items.length>0){const e=`${te}/inventories/transfer_items`,t=this.getCurrentDate(),a=this.getCurrentTime(),s=this.user.id,o=this.notes,n=this.senderWarehouse.id,r=this.receiverWarehouse.id,i=this.inventory_items.map((e=>({item_id:e.item_id,name:e.name,storing_format_units:e.storing_format_units,storing_unit_format_name:e.storing_unit_format_name,transferring_format_units:e.transferring_format_units,transferring_unit_format_name:e.transferring_unit_format_name}))),l={inventory_items:i,currentDate:t,currentTime:a,userId:s,notes:o,sourceWarehouse_Id:n,destinationWarehouse_Id:r};ee.Z.post(e,l).then((e=>{console.log(e),ae.Am.success("Transacción guardada",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}),this.tableData=[{item_id:"",name:"",storing_format_units:"",storing_unit_format_name:"",transferring_format_units:"",transferring_unit_format_name:""}],this.tableData=[],this.addItem(),this.notes="",this.receiverWarehouse="",this.senderWarehouse=""})).catch((e=>{ae.Am.error("Error al guardar la transacción: "+e.message,{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0})}))}else ae.Am.info("Debe llenar todos los campos en al menos una fila antes de guardar la transacción",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0});this.inventory_items=[]},getCurrentDate(){const e=new Date,t=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getFullYear()).slice(-2);return`${t}-${a}-${s}`},getCurrentTime(){const e=new Date;return e.toLocaleTimeString("en-US",{timeStyle:"medium"})},handleKeyDown(e){e.shiftKey&&"Tab"===e.key&&this.showModal()}}};const Ya=(0,re.Z)(Na,[["render",qa],["__scopeId","data-v-2bfdf433"]]);var Ka=Ya;const Ra=e=>((0,c.dD)("data-v-4de42de2"),e=e(),(0,c.Cn)(),e),Qa={class:"container"},Ga={key:0},Ja=Ra((()=>(0,c._)("div",{class:"modal-background"},null,-1))),Xa={class:"modal-content container-md",style:{"z-index":"1"}},es=Ra((()=>(0,c._)("h2",null,"Búsqueda de artículos",-1))),ts={class:"search-container"},as=Ra((()=>(0,c._)("label",{for:"searchInput"},"Buscar por Nombre o Código:",-1))),ss={class:"table-container"},os={class:"table table-hover"},ns=Ra((()=>(0,c._)("thead",null,[(0,c._)("tr",null,[(0,c._)("th",{class:"text-center"},"Código del artículo"),(0,c._)("th",{class:"text-center"},"Nombre del artículo"),(0,c._)("th",{class:"text-center"})])],-1))),rs={style:{width:"10px"}},is=["id","value","onChange"],ls={class:"row"},cs={class:"btn-group"},ds={class:"document-header"},us={class:"header-row"},ms=Ra((()=>(0,c._)("h1",{class:"text-center mb-5"},"Salida",-1))),hs={class:"ms-0"},_s={class:"row mb-lg-5"},gs=Ra((()=>(0,c._)("div",{class:"col-1"},[(0,c._)("label",{for:"warehouseSelect"},"Bodega:")],-1))),ps={class:"col-11"},bs=Ra((()=>(0,c._)("option",{disabled:"",value:""},"Seleccionar",-1))),fs=["value"],vs=Ra((()=>(0,c._)("h4",null,"Lista de Artículos",-1))),ws={class:"table-container"},ys={class:"table"},ks=Ra((()=>(0,c._)("thead",null,[(0,c._)("tr",null,[(0,c._)("th",{class:"text-center"},"Código del artículo"),(0,c._)("th",{class:"text-center"},"Nombre del artículo"),(0,c._)("th",{class:"text-center"},"Cantidad en unidades de inventario a remover"),(0,c._)("th",{class:"text-center"},"Unidades"),(0,c._)("th",{class:"text-center"},"Cantidad en unidades de venta a remover"),(0,c._)("th",{class:"text-center"},"Unidades"),(0,c._)("th",{class:"text-center"},"Acciones")])],-1))),Cs=["id","onUpdate:modelValue","onKeydown"],xs=["onUpdate:modelValue"],Ds={class:"text-center"},Is=["id","onUpdate:modelValue","onInput"],Ss={class:"text-center"},Os={class:"text-center"},Vs=["onUpdate:modelValue","onInput"],As={class:"text-center"},Ts={class:"text-center"},$s=["onClick"],Us={class:"observations-section mt-4"},Ls=Ra((()=>(0,c._)("h4",null,"Observaciones",-1))),js={class:"form-footer text-center"};function zs(e,t,a,o,n,r){return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c.wy)((0,c._)("input",{id:"check","onUpdate:modelValue":t[0]||(t[0]=e=>r.checked=e),type:"checkbox",onChange:t[1]||(t[1]=(...e)=>r.handleCheckboxChange&&r.handleCheckboxChange(...e))},null,544),[[s.e8,r.checked]]),(0,c._)("div",Qa,[(0,c._)("div",null,[n.modalVisible?((0,c.wg)(),(0,c.iD)("div",Ga,[Ja,(0,c._)("div",Xa,[es,(0,c._)("div",ts,[as,(0,c.wy)((0,c._)("input",{id:"searchInput","onUpdate:modelValue":t[2]||(t[2]=t=>e.searchQuery=t),class:"form-control",type:"text",onKeydown:t[3]||(t[3]=(0,s.D2)(((...e)=>r.searchItem&&r.searchItem(...e)),["enter"]))},null,544),[[s.nr,e.searchQuery]]),(0,c._)("button",{class:"btn btn-success",onClick:t[4]||(t[4]=(...e)=>r.searchItem&&r.searchItem(...e))},"Buscar")]),(0,c._)("div",ss,[(0,c._)("table",os,[ns,(0,c._)("tbody",null,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(n.filteredItems,(e=>((0,c.wg)(),(0,c.iD)("tr",{key:e.id,class:(0,d.C_)({"table-row-selected":e.isSelected})},[(0,c._)("td",null,(0,d.zw)(e.id),1),(0,c._)("td",null,(0,d.zw)(e.name),1),(0,c._)("td",rs,[(0,c.wy)((0,c._)("input",{id:e.id,"onUpdate:modelValue":t[5]||(t[5]=e=>n.selectedItems=e),value:e,class:"form-check-input",type:"checkbox",onChange:t=>r.handleItemCheckboxChange(e)},null,40,is),[[s.e8,n.selectedItems]])])],2)))),128))])])]),(0,c._)("div",ls,[(0,c._)("div",cs,[(0,c._)("button",{class:"btn btn-danger",onClick:t[6]||(t[6]=(...e)=>r.closeModal&&r.closeModal(...e))},"Cerrar"),(0,c._)("button",{class:"btn btn-success",onClick:t[7]||(t[7]=(...e)=>r.addSelectedItems&&r.addSelectedItems(...e))},"Agregar")])])])])):(0,c.kq)("",!0)]),(0,c._)("div",ds,[(0,c._)("div",us,[ms,(0,c._)("div",hs,[(0,c._)("p",null,"Fecha: "+(0,d.zw)(r.getCurrentDate()),1),(0,c._)("p",null,"Hora: "+(0,d.zw)(r.getCurrentTime()),1),(0,c._)("p",null,"Usuario: "+(0,d.zw)(this.$store.state.user.name),1),(0,c._)("div",_s,[gs,(0,c._)("div",ps,[(0,c.wy)((0,c._)("select",{id:"warehouseSelect","onUpdate:modelValue":t[8]||(t[8]=e=>n.selectedWarehouse=e),class:"form-select ms-2"},[bs,((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(n.warehouses,(e=>((0,c.wg)(),(0,c.iD)("option",{key:e.id,value:e},(0,d.zw)(e.name),9,fs)))),128))],512),[[s.bM,n.selectedWarehouse]])])])])])]),vs,(0,c._)("div",ws,[(0,c._)("table",ys,[ks,(0,c._)("tbody",null,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(n.tableData,((e,t)=>((0,c.wg)(),(0,c.iD)("tr",{key:t,class:(0,d.C_)({"table-row-selected":e.selected})},[(0,c._)("td",null,[(0,c.wy)((0,c._)("input",{id:"ID"+t,"onUpdate:modelValue":t=>e.item_id=t,class:"form-control",type:"text",onKeydown:(0,s.D2)((a=>r.onCellInput(e,"item_id",a,t)),["tab"])},null,40,Cs),[[s.nr,e.item_id]])]),(0,c._)("td",null,[(0,c.wy)((0,c._)("input",{"onUpdate:modelValue":t=>e.name=t,class:"form-control",readonly:"",type:"text"},null,8,xs),[[s.nr,e.name]])]),(0,c._)("td",null,[(0,c._)("div",Ds,[(0,c.wy)((0,c._)("input",{id:"SU"+t,"onUpdate:modelValue":t=>e.storing_format_units=t,class:"form-control",type:"number",onInput:t=>r.onCellInput(e,"storing_format_units",t)},null,40,Is),[[s.nr,e.storing_format_units]])])]),(0,c._)("td",null,[(0,c._)("div",Ss,(0,d.zw)(e.storing_unit_format_name),1)]),(0,c._)("td",null,[(0,c._)("div",Os,[(0,c.wy)((0,c._)("input",{"onUpdate:modelValue":t=>e.transferring_format_units=t,class:"form-control",type:"number",onInput:t=>r.onCellInput(e,"transferring_format_units",t)},null,40,Vs),[[s.nr,e.transferring_format_units]])])]),(0,c._)("td",null,[(0,c._)("div",As,(0,d.zw)(e.transferring_unit_format_name),1)]),(0,c._)("td",Ts,[(0,c._)("button",{class:"btn btn-danger",onClick:e=>r.removeItem(t)}," Eliminar ",8,$s)])],2)))),128))])])]),(0,c._)("div",Us,[Ls,(0,c.wy)((0,c._)("textarea",{"onUpdate:modelValue":t[9]||(t[9]=e=>n.notes=e),class:"form-control"},null,512),[[s.nr,n.notes]])]),(0,c._)("div",js,[(0,c._)("button",{class:"btn btn-success",type:"submit",onClick:t[10]||(t[10]=(...e)=>r.saveTransaction&&r.saveTransaction(...e))}," Guardar ")])])],64)}var Es={data(){return{tableData:[],filteredItems:[],inventory_items:[],warehouses:[],modalVisible:!1,selectedWarehouse:"",selectedItems:[],notes:""}},mounted(){this.$state.navbarTitle="Salidas de inventario",document.addEventListener("keydown",this.handleKeyDown),ee.Z.get(`${te}/warehouses/`).then((e=>{this.warehouses=e.data})).catch((e=>{console.error(e)})),this.addItem()},beforeUnmount(){document.removeEventListener("keydown",this.handleKeyDown)},computed:{...(0,r.rn)(["checkboxValue"]),checked:{get(){return this.checkboxValue}}},methods:{...(0,r.OI)(["toggleCheckboxValue"]),handleCheckboxChange(){this.toggleCheckboxValue()},handleItemCheckboxChange(e){e.isSelected=!e.isSelected},updateWarehouse(e,t){e.warehouse=t},showModal(){this.modalVisible=!0},closeModal(){this.modalVisible=!1},addSelectedItems(){this.selectedItems.forEach((e=>{this.addItem(0,e)})),this.selectedItems=[],this.closeModal()},addItem(e,t){if(t){const a=null==t.item_id?t.id:t.item_id.trim();if(""!==a){let s=`${te}/search_inventory_item?`;""!==a&&(s+=`item_id=${a}`),ee.Z.get(s).then((a=>{const s=a.data;t.item_id=s.item_id||"",t.name=s.name||"",t.storing_unit_format_name=s.storing_unit_format_name||"",t.conversion_factor=s.conversion_factor||"",t.transferring_unit_format_name=s.transferring_unit_format_name||"",this.calculateSaleUnits(t),this.tableData.splice(1,0,t),this.tableData.splice(0,1,{item_id:"",name:"",storing_format_units:"",storing_unit_format_name:"",transferring_format_units:"",transferring_unit_format_name:""}),this.$nextTick((()=>{const t=document.getElementById(`SU${e+1}`);t&&t.focus()}))})).catch((e=>{const t=e.response.data.error;500!==e.response.status&&t?ae.Am.error(t,{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}):console.error(e)}))}}else this.tableData.unshift({item_id:"",name:"",storing_format_units:"",storing_unit_format_name:"",transferring_format_units:"",transferring_unit_format_name:""});this.modalVisible&&this.closeModal()},checkUnits(e){return""!==e.transferring_format_units||""!==e.storing_format_units},removeItem(e){0!==e&&this.tableData.splice(e,1)},searchItem(){const e=void 0===this.searchQuery?"":this.searchQuery.trim();if(""!==e){const t=`${te}/search_items/?data=${e}`;ee.Z.get(t).then((e=>{console.log(e),this.filteredItems=e.data})).catch((e=>{console.error(e)}))}},onCellInput(e,t,a,s){a.stopPropagation(),a.preventDefault(),e[t]=a.target.value,"Tab"===a.key&&"item_id"===t?e===this.tableData[0]&&"item_id"===t&&""!==e.item_id.trim()&&this.addItem(s,e):"storing_format_units"===t||"conversion_factor"===t?this.calculateSaleUnits(e):"Enter"===a.key&&""===this.selectedWarehouse?ae.Am.info("Debe seleccionar un almacén",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}):"Enter"===a.key&&this.saveTransaction()},calculateSaleUnits(e){const t=parseFloat(e.storing_format_units),a=parseFloat(e.conversion_factor);if(!isNaN(t)&&!isNaN(a)){const s=t*a;e.transferring_format_units=s.toFixed(2)}},saveTransaction(){if(this.inventory_items=this.tableData.filter((e=>""!==e.item_id.trim()&&""!==e.name.trim()&&""!==e.storing_format_units&&""!==e.transferring_format_units)),""===this.selectedWarehouse)ae.Am.info("Debe seleccionar un almacén",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0});else if(this.inventory_items.forEach((e=>{if(!this.checkUnits(e))return ae.Am.info("Debe ingresar las unidades de almacenamiento a todos los artículos agregados",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}),""})),this.inventory_items.length>0){const e=`${te}/inventories/remove_items`,t={inventory_items:this.inventory_items,currentDate:this.getCurrentDate(),warehouse_id:this.selectedWarehouse?this.selectedWarehouse.id:null,user:this.$store.state.user.id,notes:this.notes};ee.Z.post(e,t).then((e=>{console.log(e),ae.Am.success("Transacción guardada",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}),this.tableData=[],this.addItem(),this.notes="",this.selectedWarehouse=""})).catch((e=>{ae.Am.error("Error al guardar la transacción: "+e.message,{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0})}))}else ae.Am.info("Debe llenar todos los campos en al menos una fila antes de guardar la transacción",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0});this.inventory_items=[]},getCurrentDate(){const e=new Date,t=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getFullYear()).slice(-2);return`${t}-${a}-${s}`},getCurrentTime(){const e=new Date;return e.toLocaleTimeString("en-US",{timeStyle:"medium"})},handleKeyDown(e){e.shiftKey&&"Tab"===e.key&&this.showModal()}}};const Bs=(0,re.Z)(Es,[["render",zs],["__scopeId","data-v-4de42de2"]]);var Hs=Bs;const Ws=e=>((0,c.dD)("data-v-b15c7398"),e=e(),(0,c.Cn)(),e),Zs={class:"container"},Ps={class:"row"},Fs={id:"contentDiv",class:"col-lg-10 col-md-12"},Ms=Ws((()=>(0,c._)("div",{class:"row mb-lg-5"},[(0,c._)("h1",null," Inventario en el Sistema ")],-1))),qs={class:"row border rounded-3 p-3 mb-lg-5"},Ns=Ws((()=>(0,c._)("h4",{class:"filter-title"},"Filtros",-1))),Ys={class:"filters-container"},Ks={class:"col-md-2"},Rs={class:"form-group code"},Qs=Ws((()=>(0,c._)("label",{for:"codigo"},"Código de Artículo:",-1))),Gs={class:"col-md-2"},Js={class:"form-group"},Xs=Ws((()=>(0,c._)("label",{for:"category"},"Categoría:",-1))),eo=Ws((()=>(0,c._)("option",{value:""},"Todas las categorías",-1))),to=["value"],ao={class:"col-md-2"},so={class:"form-group"},oo=Ws((()=>(0,c._)("label",{for:"subcategory"},"Subcategoría:",-1))),no=Ws((()=>(0,c._)("option",{value:""},"Todas las subcategorías",-1))),ro=["value"],io={class:"col-md-2"},lo={class:"form-group"},co=Ws((()=>(0,c._)("label",{for:"design"},"Diseño:",-1))),uo=Ws((()=>(0,c._)("option",{value:""},"Todos los diseños",-1))),mo=["value"],ho={class:"col-md-2"},_o={class:"form-group"},go=Ws((()=>(0,c._)("label",{for:"brand"},"Marca:",-1))),po=Ws((()=>(0,c._)("option",{value:""},"Todas las marcas",-1))),bo=["value"],fo={class:"mt-lg-4"},vo=Ws((()=>(0,c._)("div",{class:"row"},[(0,c._)("h3",null,"Tabla de Inventario de Artículos")],-1))),wo={class:"row"},yo={class:"table-responsive-lg",style:{"max-height":"600px !important"}},ko={class:"table table-bordered"},Co=Ws((()=>(0,c._)("th",{class:"text-center"},"Código",-1))),xo=Ws((()=>(0,c._)("th",{class:"text-center"},"Nombre",-1))),Do=Ws((()=>(0,c._)("th",{class:"text-center"},"Stock Total",-1))),Io={class:"text-center"},So=Ws((()=>(0,c._)("i",{class:"bi bi-caret-right-fill",style:{"margin-right":"2px"}},null,-1))),Oo={class:"text-center"};function Vo(e,t,a,o,n,r){const i=(0,c.up)("router-link");return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c.wy)((0,c._)("input",{type:"checkbox",id:"check","onUpdate:modelValue":t[0]||(t[0]=e=>r.checked=e),onChange:t[1]||(t[1]=(...e)=>r.handleCheckboxChange&&r.handleCheckboxChange(...e))},null,544),[[s.e8,r.checked]]),(0,c._)("div",Zs,[(0,c._)("div",Ps,[(0,c._)("div",Fs,[Ms,(0,c._)("div",qs,[Ns,(0,c._)("div",Ys,[(0,c._)("div",Ks,[(0,c._)("div",Rs,[Qs,(0,c.wy)((0,c._)("input",{type:"text",id:"codigo",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>n.filter.id=e),placeholder:"Código"},null,512),[[s.nr,n.filter.id]])])]),(0,c._)("div",Gs,[(0,c._)("div",Js,[Xs,(0,c.wy)((0,c._)("select",{id:"category",class:"form-control","onUpdate:modelValue":t[3]||(t[3]=e=>n.filter.category=e),onChange:t[4]||(t[4]=e=>r.resetSubcategory())},[eo,((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(n.categories,(e=>((0,c.wg)(),(0,c.iD)("option",{value:e.name,key:e.name},(0,d.zw)(e.name),9,to)))),128))],544),[[s.bM,n.filter.category]])])]),(0,c._)("div",ao,[(0,c._)("div",so,[oo,(0,c.wy)((0,c._)("select",{id:"subcategory",class:"form-control","onUpdate:modelValue":t[5]||(t[5]=e=>n.filter.subcategory=e)},[no,((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(r.filteredSubcategories,(e=>((0,c.wg)(),(0,c.iD)("option",{value:e.name,key:e.name},(0,d.zw)(e.name),9,ro)))),128))],512),[[s.bM,n.filter.subcategory]])])]),(0,c._)("div",io,[(0,c._)("div",lo,[co,(0,c.wy)((0,c._)("select",{id:"design",class:"form-control","onUpdate:modelValue":t[6]||(t[6]=e=>n.filter.design=e)},[uo,((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(n.designs,(e=>((0,c.wg)(),(0,c.iD)("option",{value:e.name,key:e.name},(0,d.zw)(e.name),9,mo)))),128))],512),[[s.bM,n.filter.design]])])]),(0,c._)("div",ho,[(0,c._)("div",_o,[go,(0,c.wy)((0,c._)("select",{id:"brand",class:"form-control","onUpdate:modelValue":t[7]||(t[7]=e=>n.filter.brand=e)},[po,((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(n.brands,(e=>((0,c.wg)(),(0,c.iD)("option",{value:e.name,key:e.name},(0,d.zw)(e.name),9,bo)))),128))],512),[[s.bM,n.filter.brand]])])]),(0,c._)("button",{class:"btn btn-secondary",style:{width:"200px",margin:"10px"},onClick:t[8]||(t[8]=e=>r.resetFilter("all"))}," Limpiar filtros ")])]),(0,c._)("div",fo,[vo,(0,c._)("div",wo,[(0,c._)("div",yo,[(0,c._)("table",ko,[(0,c._)("thead",null,[(0,c._)("tr",null,[Co,xo,Do,((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(n.warehouses,(e=>((0,c.wg)(),(0,c.iD)("th",{key:e.name,class:"text-center"}," Stock "+(0,d.zw)(e.name),1)))),128))])]),(0,c._)("tbody",null,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(r.filteredItems,(e=>((0,c.wg)(),(0,c.iD)("tr",{key:e.id},[(0,c._)("td",Io,[So,(0,c.Wm)(i,{to:{name:"ArticleDetails",params:{id:e.id}},style:{"background-color":"transparent",color:"black","text-decoration":"none"}},{default:(0,c.w5)((()=>[(0,c.Uk)((0,d.zw)(e.id),1)])),_:2},1032,["to"])]),(0,c._)("td",Oo,(0,d.zw)(e.name),1),(0,c._)("td",{class:(0,d.C_)([{"text-danger":r.calculateStockUnits(e)<e.minimal_stock},"text-center"])},(0,d.zw)(r.calculateStockUnits(e))+" "+(0,d.zw)(e.storing_format_units_name),3),((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(e.inventory_items,(t=>((0,c.wg)(),(0,c.iD)("td",{key:t.id,class:"text-center"},(0,d.zw)(t.storing_format_units)+" "+(0,d.zw)(e.storing_format_units_name),1)))),128))])))),128))])])])])])])])])],64)}var Ao={name:"InventoryTable",data(){return{filter:{id:"",category:"",subcategory:"",design:"",brand:"",warehouse:""},items:[],categories:[],designs:[],brands:[],warehouses:[]}},computed:{...(0,r.rn)(["checkboxValue"]),checked:{get(){return this.checkboxValue}},filteredSubcategories(){return this.categories.filter((e=>e.name===this.filter.category)).map((e=>e.subcategories)).flat()},filteredItems(){return this.items.filter((e=>e.id.toUpperCase().includes(this.filter.id.toUpperCase())&&(""===this.filter.category||e.category===this.filter.category)&&(""===this.filter.subcategory||e.subcategory===this.filter.subcategory)&&(""===this.filter.design||e.design&&e.design.name===this.filter.design)&&(""===this.filter.brand||e.brand&&e.brand.name===this.filter.brand)&&(""===this.filter.warehouse||e.warehouse===this.filter.warehouse))).sort(((e,t)=>e.category.localeCompare(t.category)))}},mounted(){this.$state.navbarTitle="Consulta de inventario",ee.Z.get(te+"/stock").then((e=>{console.log(e.data),this.items=e.data.items,this.categories=e.data.categories,this.designs=e.data.designs,this.brands=e.data.brands,this.warehouses=e.data.warehouses})).catch((e=>{console.log(e)}))},methods:{...(0,r.OI)(["toggleCheckboxValue"]),handleCheckboxChange(){this.toggleCheckboxValue()},resetSubcategory(){this.filter.subcategory=""},calculateStockUnits(e){let t=0;return e.inventory_items.forEach((e=>{const a=parseFloat(e.storing_format_units);isNaN(a)||(t+=a)})),t},resetFilter(e){switch(e){case"all":this.filter.id="",this.filter.category="",this.filter.subcategory="",this.filter.design="",this.filter.brand="",this.filter.warehouse="";break;default:break}}}};const To=(0,re.Z)(Ao,[["render",Vo],["__scopeId","data-v-b15c7398"]]);var $o=To;const Uo=e=>((0,c.dD)("data-v-1f33c75e"),e=e(),(0,c.Cn)(),e),Lo={class:"container"},jo={class:"row"},zo={class:"col-md-8 offset-md-2"},Eo={class:"mb-3"},Bo=Uo((()=>(0,c._)("label",{for:"search",class:"form-label"},"Buscar categoría:",-1))),Ho={class:"row"},Wo={class:"col-md-12"},Zo={class:"table-responsive"},Po={class:"table"},Fo=Uo((()=>(0,c._)("thead",null,[(0,c._)("tr",null,[(0,c._)("th",{class:"text-center"},"Nombre de Categoría"),(0,c._)("th",{class:"text-center"},"Acciones")])],-1))),Mo={class:"text-center"},qo={class:"text-center"},No=["onClick"],Yo=["onClick"];function Ko(e,t,a,o,n,r){return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c.wy)((0,c._)("input",{type:"checkbox",id:"check","onUpdate:modelValue":t[0]||(t[0]=e=>r.checked=e),onChange:t[1]||(t[1]=(...e)=>r.handleCheckboxChange&&r.handleCheckboxChange(...e))},null,544),[[s.e8,r.checked]]),(0,c._)("div",Lo,[(0,c._)("div",jo,[(0,c._)("div",zo,[(0,c._)("div",Eo,[Bo,(0,c.wy)((0,c._)("input",{type:"text",id:"search",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>n.searchQuery=e),placeholder:"Buscar por nombre"},null,512),[[s.nr,n.searchQuery]])]),(0,c._)("div",Ho,[(0,c._)("div",Wo,[(0,c._)("button",{onClick:t[3]||(t[3]=(...e)=>r.addCategory&&r.addCategory(...e)),class:"btn btn-success"}," Agregar categoría ")])]),(0,c._)("div",Zo,[(0,c._)("table",Po,[Fo,(0,c._)("tbody",null,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(r.filteredCategories,(e=>((0,c.wg)(),(0,c.iD)("tr",{key:e.name},[(0,c._)("td",Mo,(0,d.zw)(e.name),1),(0,c._)("td",qo,[(0,c._)("button",{onClick:t=>r.editCategory(e),class:"btn btn-primary"}," Editar categoría ",8,No),(0,c._)("button",{onClick:t=>r.deleteCategory(e),class:"btn btn-danger"}," Eliminar ",8,Yo)])])))),128))])])])])])])],64)}var Ro={name:"CategoryList",data(){return{categories:[],searchQuery:""}},computed:{...(0,r.rn)(["checkboxValue"]),checked:{get(){return this.checkboxValue}},filteredCategories(){return this.categories.filter((e=>e.name.toLowerCase().includes(this.searchQuery.toLowerCase())))}},methods:{...(0,r.OI)(["toggleCheckboxValue"]),handleCheckboxChange(){this.toggleCheckboxValue()},addCategory(){this.$router.push({name:"AddCategory"})},editCategory(e){this.$router.push({name:"EditCategory",params:{id:e.id}})},deleteCategory(e){Me().fire({title:"¿Estás seguro?",text:`Se eliminará la categoría ${e.name}. Esta acción no se puede deshacer.`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then((t=>{t.isConfirmed&&ee.Z.delete(te+"/categories/"+e.id).then((t=>{console.log(t),ae.Am.success("Se ha eliminado la categoría correctamente",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}),this.categories=this.categories.filter((t=>t.id!==e.id))})).catch((e=>{console.log(e),ae.Am.error("Ha ocurrido un error al eliminar la categoría, esta posee al menos un artículo asociado",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0})}))}))}},mounted(){this.$state.navbarTitle="Lista de Categorías",ee.Z.get(te+"/categories").then((e=>{this.categories=e.data})).catch((e=>{console.log(e)}))}};const Qo=(0,re.Z)(Ro,[["render",Ko],["__scopeId","data-v-1f33c75e"]]);var Go=Qo;const Jo=e=>((0,c.dD)("data-v-c420d874"),e=e(),(0,c.Cn)(),e),Xo={class:"container"},en={class:"row"},tn={class:"col-md-8 offset-md-2"},an={class:"mb-3"},sn=Jo((()=>(0,c._)("label",{for:"search",class:"form-label"},"Buscar subcategoría:",-1))),on={class:"row"},nn={class:"col-md-12"},rn={class:"table"},ln=Jo((()=>(0,c._)("thead",null,[(0,c._)("tr",null,[(0,c._)("th",{class:"text-center"},"Nombre de Subcategoría"),(0,c._)("th",{class:"text-center"},"Categoría asociada"),(0,c._)("th",{class:"text-center"},"Acciones")])],-1))),cn={class:"text-center"},dn={class:"text-center"},un={class:"text-center"},mn=["onClick"],hn=["onClick"];function _n(e,t,a,o,n,r){return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c.wy)((0,c._)("input",{type:"checkbox",id:"check","onUpdate:modelValue":t[0]||(t[0]=e=>r.checked=e),onChange:t[1]||(t[1]=(...e)=>r.handleCheckboxChange&&r.handleCheckboxChange(...e))},null,544),[[s.e8,r.checked]]),(0,c._)("div",Xo,[(0,c._)("div",en,[(0,c._)("div",tn,[(0,c._)("div",an,[sn,(0,c.wy)((0,c._)("input",{type:"text",id:"search",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>n.searchQuery=e),placeholder:"Buscar por nombre o categoría"},null,512),[[s.nr,n.searchQuery]])]),(0,c._)("div",on,[(0,c._)("div",nn,[(0,c._)("button",{onClick:t[3]||(t[3]=(...e)=>r.addSubcategory&&r.addSubcategory(...e)),class:"btn btn-success"}," Agregar subcategoría ")])]),(0,c._)("div",null,[(0,c._)("table",rn,[ln,(0,c._)("tbody",null,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(r.filteredSubcategories,(e=>((0,c.wg)(),(0,c.iD)("tr",{key:e.id},[(0,c._)("td",cn,(0,d.zw)(e.name),1),(0,c._)("td",dn,(0,d.zw)(e.category.name),1),(0,c._)("td",un,[(0,c._)("button",{onClick:t=>r.editSubcategory(e),class:"btn btn-secondary"}," Editar subcategoría ",8,mn),(0,c._)("button",{onClick:t=>r.deleteSubcategory(e),class:"btn btn-danger"}," Eliminar ",8,hn)])])))),128))])])])])])])],64)}var gn={name:"SubcategoryList",data(){return{subcategories:[],searchQuery:""}},computed:{...(0,r.rn)(["checkboxValue"]),checked:{get(){return this.checkboxValue}},filteredSubcategories(){return this.subcategories.filter((e=>e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.category.name.toLowerCase().includes(this.searchQuery.toLowerCase())))}},methods:{...(0,r.OI)(["toggleCheckboxValue"]),handleCheckboxChange(){this.toggleCheckboxValue()},addSubcategory(){this.$router.push({name:"AddSubcategory"})},editSubcategory(e){this.$router.push({name:"EditSubcategory",params:{id:e.id}})},deleteSubcategory(e){Me().fire({title:"¿Estás seguro?",text:`Se eliminará la subcategoría ${e.name}. Esta acción no se puede deshacer.`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then((t=>{t.isConfirmed&&ee.Z.delete(te+"/subcategories/"+e.id).then((e=>{this.subcategories=this.subcategories.filter((t=>t.id!==e.data.id)),ae.Am.success("Se ha eliminado la subcategoría correctamente",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0})})).catch((e=>{console.log(e),ae.Am.error("Ha ocurrido un error al eliminar la subcategoría, esto debido a que hay artículos asociados a esta subcategoría",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0})}))}))}},mounted(){this.$state.navbarTitle="Lista de Subcategorías",ee.Z.get(te+"/subcategories").then((e=>{this.subcategories=e.data})).catch((e=>{console.log(e)}))}};const pn=(0,re.Z)(gn,[["render",_n],["__scopeId","data-v-c420d874"]]);var bn=pn;const fn=e=>((0,c.dD)("data-v-44e377de"),e=e(),(0,c.Cn)(),e),vn={class:"container"},wn={class:"row"},yn={class:"col-md-8 offset-md-2"},kn={class:"mb-3"},Cn=fn((()=>(0,c._)("label",{for:"search",class:"form-label"},"Buscar marca:",-1))),xn={class:"row"},Dn={class:"col-md-12"},In={class:"table-container"},Sn={class:"table"},On=fn((()=>(0,c._)("thead",null,[(0,c._)("tr",null,[(0,c._)("th",{class:"text-center"},"Nombre de Marca"),(0,c._)("th",{class:"text-center"},"Acciones")])],-1))),Vn={class:"text-center"},An={class:"text-center"},Tn=["onClick"];function $n(e,t,a,o,n,r){const i=(0,c.up)("router-link");return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c.wy)((0,c._)("input",{type:"checkbox",id:"check","onUpdate:modelValue":t[0]||(t[0]=e=>r.checked=e),onChange:t[1]||(t[1]=(...e)=>r.handleCheckboxChange&&r.handleCheckboxChange(...e))},null,544),[[s.e8,r.checked]]),(0,c._)("div",vn,[(0,c._)("div",wn,[(0,c._)("div",yn,[(0,c._)("div",kn,[Cn,(0,c.wy)((0,c._)("input",{type:"text",id:"search",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>n.searchQuery=e),placeholder:"Buscar por nombre"},null,512),[[s.nr,n.searchQuery]])]),(0,c._)("div",xn,[(0,c._)("div",Dn,[(0,c._)("button",{onClick:t[3]||(t[3]=(...e)=>r.addBrand&&r.addBrand(...e)),class:"btn btn-success"}," Agregar marca ")])]),(0,c._)("div",In,[(0,c._)("table",Sn,[On,(0,c._)("tbody",null,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(r.filteredBrands,(e=>((0,c.wg)(),(0,c.iD)("tr",{key:e.name},[(0,c._)("td",Vn,(0,d.zw)(e.name),1),(0,c._)("td",An,[(0,c.Wm)(i,{to:{name:"EditBrand",params:{id:e.id}},class:"btn btn-secondary"},{default:(0,c.w5)((()=>[(0,c.Uk)("Editar")])),_:2},1032,["to"]),(0,c._)("button",{onClick:t=>r.deleteBrand(e),class:"btn btn-danger"}," Eliminar ",8,Tn)])])))),128))])])])])])])],64)}var Un={name:"BrandList",data(){return{brands:[],searchQuery:""}},computed:{...(0,r.rn)(["checkboxValue"]),checked:{get(){return this.checkboxValue}},filteredBrands(){return this.brands.filter((e=>e.name.toLowerCase().includes(this.searchQuery.toLowerCase())))}},methods:{...(0,r.OI)(["toggleCheckboxValue"]),handleCheckboxChange(){this.toggleCheckboxValue()},addBrand(){this.$router.push({name:"AddBrand"})},deleteBrand(e){Me().fire({title:"¿Estás seguro?",text:`Se eliminará la marca ${e.name}. Esta acción no se puede deshacer.`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then((t=>{t.isConfirmed&&ee.Z.delete(te+"/brands/"+e.id).then((t=>{console.log(t),ae.Am.success("Se ha eliminado la marca correctamente",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}),this.brands=this.brands.filter((t=>t.id!==e.id))})).catch((e=>{console.log(e),ae.Am.error("No se pudo eliminar, ya que posee artículos relacionados",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0})}))}))}},mounted(){this.$state.navbarTitle="Lista de Marcas",ee.Z.get(te+"/brands").then((e=>{this.brands=e.data})).catch((e=>{console.log(e)}))}};const Ln=(0,re.Z)(Un,[["render",$n],["__scopeId","data-v-44e377de"]]);var jn=Ln;const zn=e=>((0,c.dD)("data-v-2639f962"),e=e(),(0,c.Cn)(),e),En={class:"container"},Bn={class:"row"},Hn={class:"col-md-8 offset-md-2"},Wn={class:"mb-3"},Zn=zn((()=>(0,c._)("label",{for:"search",class:"form-label"},"Buscar diseño:",-1))),Pn={class:"row"},Fn={class:"col-md-12"},Mn={class:"table-responsive"},qn={class:"table"},Nn=zn((()=>(0,c._)("thead",null,[(0,c._)("tr",null,[(0,c._)("th",{class:"text-center"},"Nombre de Diseño"),(0,c._)("th",{class:"text-center"},"Acciones")])],-1))),Yn={class:"text-center"},Kn={class:"text-center"},Rn=["onClick"],Qn=["onClick"];function Gn(e,t,a,o,n,r){return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c.wy)((0,c._)("input",{type:"checkbox",id:"check","onUpdate:modelValue":t[0]||(t[0]=e=>r.checked=e),onChange:t[1]||(t[1]=(...e)=>r.handleCheckboxChange&&r.handleCheckboxChange(...e))},null,544),[[s.e8,r.checked]]),(0,c._)("div",En,[(0,c._)("div",Bn,[(0,c._)("div",Hn,[(0,c._)("div",Wn,[Zn,(0,c.wy)((0,c._)("input",{type:"text",id:"search",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>n.searchQuery=e),placeholder:"Buscar por nombre"},null,512),[[s.nr,n.searchQuery]])]),(0,c._)("div",Pn,[(0,c._)("div",Fn,[(0,c._)("button",{onClick:t[3]||(t[3]=(...e)=>r.addDesign&&r.addDesign(...e)),class:"btn btn-success"}," Agregar diseño ")])]),(0,c._)("div",Mn,[(0,c._)("table",qn,[Nn,(0,c._)("tbody",null,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(r.filteredDesigns,(e=>((0,c.wg)(),(0,c.iD)("tr",{key:e.name},[(0,c._)("td",Yn,(0,d.zw)(e.name),1),(0,c._)("td",Kn,[(0,c._)("button",{onClick:t=>r.editDesign(e),class:"btn btn-secondary"}," Editar ",8,Rn),(0,c._)("button",{onClick:t=>r.deleteDesign(e),class:"btn btn-danger"}," Eliminar ",8,Qn)])])))),128))])])])])])])],64)}var Jn={name:"DesignList",data(){return{designs:[],searchQuery:""}},computed:{...(0,r.rn)(["checkboxValue"]),checked:{get(){return this.checkboxValue}},filteredDesigns(){return this.designs.filter((e=>e.name.toLowerCase().includes(this.searchQuery.toLowerCase())))}},methods:{...(0,r.OI)(["toggleCheckboxValue"]),handleCheckboxChange(){this.toggleCheckboxValue()},addDesign(){this.$router.push({name:"AddDesign"})},editDesign(e){this.$router.push({name:"EditDesign",params:{id:e.id}})},deleteDesign(e){Me().fire({title:"¿Estás seguro?",text:`Se eliminará el diseño ${e.name}. Esta acción no se puede deshacer.`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then((t=>{t.isConfirmed&&ee.Z.delete(`${te}/designs/${e.id}`).then((t=>{console.log(t),this.designs=this.designs.filter((t=>t.id!==e.id)),ae.Am.success("Se ha eliminado el diseño correctamente",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0})})).catch((e=>{console.log(e),ae.Am.error("Ha ocurrido un error al eliminar el diseño, esto debido a que hay artículos asociados a este diseño",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0})}))}))}},mounted(){this.$state.navbarTitle="Lista de Diseños",ee.Z.get(`${te}/designs`).then((e=>{this.designs=e.data})).catch((e=>{console.log(e)}))}};const Xn=(0,re.Z)(Jn,[["render",Gn],["__scopeId","data-v-2639f962"]]);var er=Xn;const tr=e=>((0,c.dD)("data-v-d12ca8a6"),e=e(),(0,c.Cn)(),e),ar={class:"container"},sr={class:"row"},or={class:"col-md-8 offset-md-2"},nr={class:"mb-3"},rr=tr((()=>(0,c._)("label",{for:"search",class:"form-label"},"Buscar bodega:",-1))),ir={class:"row"},lr={class:"col-md-12"},cr={class:"table-responsive"},dr={class:"table"},ur=tr((()=>(0,c._)("thead",null,[(0,c._)("tr",null,[(0,c._)("th",{class:"text-center"},"Nombre de Bodega"),(0,c._)("th",{class:"text-center"},"Acciones")])],-1))),mr={class:"text-center"},hr={class:"text-center"},_r=["onClick"];function gr(e,t,a,o,n,r){const i=(0,c.up)("router-link");return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c.wy)((0,c._)("input",{type:"checkbox",id:"check","onUpdate:modelValue":t[0]||(t[0]=e=>r.checked=e),onChange:t[1]||(t[1]=(...e)=>r.handleCheckboxChange&&r.handleCheckboxChange(...e))},null,544),[[s.e8,r.checked]]),(0,c._)("div",ar,[(0,c._)("div",sr,[(0,c._)("div",or,[(0,c._)("div",nr,[rr,(0,c.wy)((0,c._)("input",{type:"text",id:"search",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>n.searchQuery=e),placeholder:"Buscar por nombre"},null,512),[[s.nr,n.searchQuery]])]),(0,c._)("div",ir,[(0,c._)("div",lr,[(0,c._)("button",{onClick:t[3]||(t[3]=(...e)=>r.addWarehouse&&r.addWarehouse(...e)),class:"btn btn-success"}," Agregar bodega ")])]),(0,c._)("div",cr,[(0,c._)("table",dr,[ur,(0,c._)("tbody",null,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(r.filteredWarehouses,(e=>((0,c.wg)(),(0,c.iD)("tr",{key:e.name},[(0,c._)("td",mr,(0,d.zw)(e.name),1),(0,c._)("td",hr,[(0,c.Wm)(i,{to:{name:"EditWarehouse",params:{id:e.id}},class:"btn btn-secondary"},{default:(0,c.w5)((()=>[(0,c.Uk)("Editar")])),_:2},1032,["to"]),(0,c._)("button",{onClick:t=>r.deleteWarehouse(e),class:"btn btn-danger"}," Eliminar ",8,_r)])])))),128))])])])])])])],64)}var pr={name:"WarehouseList",data(){return{warehouses:[],searchQuery:""}},computed:{...(0,r.rn)(["checkboxValue"]),checked:{get(){return this.checkboxValue}},filteredWarehouses(){return this.warehouses.filter((e=>e.name.toLowerCase().includes(this.searchQuery.toLowerCase())))}},methods:{...(0,r.OI)(["toggleCheckboxValue"]),handleCheckboxChange(){this.toggleCheckboxValue()},addWarehouse(){this.$router.push({name:"AddWarehouse"})},deleteWarehouse(e){Me().fire({title:"¿Estás seguro?",text:`Se eliminará la bodega ${e.name}. Esta acción no se puede deshacer.`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then((t=>{t.isConfirmed&&ee.Z.delete(`${te}/warehouses/${e.id}`).then((t=>{console.log(t),this.warehouses=this.warehouses.filter((t=>t.id!==e.id)),ae.Am.success("Se ha eliminado la bodega correctamente",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0})})).catch((e=>{console.log(e),ae.Am.error("Ha ocurrido un error al eliminar la bodega",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0})}))}))}},mounted(){this.$state.navbarTitle="Lista de Bodegas",ee.Z.get(`${te}/warehouses`).then((e=>{this.warehouses=e.data})).catch((e=>{console.log(e)}))}};const br=(0,re.Z)(pr,[["render",gr],["__scopeId","data-v-d12ca8a6"]]);var fr=br;const vr=e=>((0,c.dD)("data-v-18b2d9c2"),e=e(),(0,c.Cn)(),e),wr={class:"container"},yr={class:"row"},kr={class:"col-md-12 mb-3 me-1 d-flex align-items-center"},Cr={class:"col-md-10 me-2"},xr=vr((()=>(0,c._)("label",{for:"search",class:"form-label"},"Buscar artículo:",-1))),Dr={class:"col-md-2 ms-2 align-self-center"},Ir=vr((()=>(0,c._)("br",null,null,-1))),Sr={class:"table-container",style:{"max-height":"700px !important"}},Or={class:"table table-bordered"},Vr=vr((()=>(0,c._)("thead",null,[(0,c._)("tr",null,[(0,c._)("th",{scope:"col",class:"text-center"},"Código"),(0,c._)("th",{scope:"col",class:"text-center"},"Nombre"),(0,c._)("th",{scope:"col",class:"text-center"},"Categoría"),(0,c._)("th",{scope:"col",class:"text-center"},"Subcategoría"),(0,c._)("th",{scope:"col",class:"text-center"},"Inventario mínimo"),(0,c._)("th",{scope:"col",class:"text-center"},"Estado"),(0,c._)("th",{scope:"col",class:"text-center"},"Marca"),(0,c._)("th",{scope:"col",class:"text-center"},"Diseño"),(0,c._)("th",{scope:"col",class:"text-center"},"Acciones")])],-1))),Ar={class:"text-center"},Tr={class:"text-center"},$r={class:"text-center"},Ur={class:"text-center"},Lr={class:"text-center"},jr={class:"text-center"},zr={class:"text-center"},Er={class:"text-center"},Br={class:"text-center"},Hr=["onClick"],Wr=["onClick"],Zr=["onClick"];function Pr(e,t,a,o,n,r){const i=(0,c.up)("router-link");return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c.wy)((0,c._)("input",{type:"checkbox",id:"check","onUpdate:modelValue":t[0]||(t[0]=e=>r.checked=e),onChange:t[1]||(t[1]=(...e)=>r.handleCheckboxChange&&r.handleCheckboxChange(...e))},null,544),[[s.e8,r.checked]]),(0,c._)("div",wr,[(0,c._)("div",yr,[(0,c._)("div",kr,[(0,c._)("div",Cr,[xr,(0,c.wy)((0,c._)("input",{type:"text",id:"search",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>n.searchQuery=e),placeholder:"Buscar por cualquier característica"},null,512),[[s.nr,n.searchQuery]])]),(0,c._)("div",Dr,[Ir,(0,c._)("button",{onClick:t[3]||(t[3]=(...e)=>r.addArticle&&r.addArticle(...e)),class:"btn btn-success"}," Agregar artículo ")])])]),(0,c._)("div",Sr,[(0,c._)("table",Or,[Vr,(0,c._)("tbody",null,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(r.filteredArticles,(e=>((0,c.wg)(),(0,c.iD)("tr",{key:e.id},[(0,c._)("td",Ar,(0,d.zw)(e.id),1),(0,c._)("td",Tr,(0,d.zw)(e.name),1),(0,c._)("td",$r,(0,d.zw)(e.category_name),1),(0,c._)("td",Ur,(0,d.zw)(e.subcategory_name),1),(0,c._)("td",Lr,(0,d.zw)(e.minimal_stock)+" "+(0,d.zw)(e.storing_format_units_name),1),(0,c._)("td",jr,(0,d.zw)("active"===e.status?"Activo":"Inactivo"),1),(0,c._)("td",zr,(0,d.zw)(null!==e.brand_id?e.brand_name:"No posee"),1),(0,c._)("td",Er,(0,d.zw)(null!==e.design_id?e.design_name:"No posee"),1),(0,c._)("td",Br,[(0,c.Wm)(i,{to:{name:"ArticleDetails",params:{id:e.id}},class:"btn btn-primary"},{default:(0,c.w5)((()=>[(0,c.Uk)("Detalles ")])),_:2},1032,["to"]),(0,c.Wm)(i,{to:{name:"EditArticle",params:{id:e.id}},class:"btn btn-secondary"},{default:(0,c.w5)((()=>[(0,c.Uk)("Editar ")])),_:2},1032,["to"]),e.transfers<=0&&e.insertions<=0&&e.removals<=0?((0,c.wg)(),(0,c.iD)("button",{key:0,onClick:t=>r.deleteArticle(e),class:"btn btn-danger"}," Eliminar ",8,Hr)):"active"===e.status?((0,c.wg)(),(0,c.iD)("button",{key:1,onClick:t=>r.toggleItemStatus(e),class:"btn btn-warning"}," Desactivar ",8,Wr)):"inactive"===e.status?((0,c.wg)(),(0,c.iD)("button",{key:2,onClick:t=>r.toggleItemStatus(e),class:"btn btn-warning"}," Activar ",8,Zr)):(0,c.kq)("",!0)])])))),128))])])])])],64)}var Fr={name:"ArticleList",data(){return{items:[],searchQuery:""}},computed:{...(0,r.rn)(["checkboxValue"]),checked:{get(){return this.checkboxValue}},filteredArticles(){return this.items.filter((e=>{const t=this.searchQuery.toLowerCase();return e.name.toLowerCase().includes(t)||e.id.toLowerCase().includes(t)||e.conversion_factor.toLowerCase().includes(t)||e.minimal_stock.toLowerCase().includes(t)||e.status.toLowerCase().includes(t)||e.subcategory_name.toLowerCase().includes(t)||e.category_name.toLowerCase().includes(t)||null!=e.brand_name&&e.brand_name.toLowerCase().includes(t)||null!=e.design_name&&e.design_name.toLowerCase().includes(t)}))}},methods:{...(0,r.OI)(["toggleCheckboxValue"]),handleCheckboxChange(){this.toggleCheckboxValue()},addArticle(){this.$router.push({name:"AddArticle"})},deleteArticle(e){Me().fire({title:"¿Estás seguro?",text:`Se eliminará el artículo ${e.name}. Esta acción no se puede deshacer.`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then((t=>{t.isConfirmed&&ee.Z.delete(te+"/items/?id="+e.id+"&user="+this.$store.state.user.id).then((t=>{console.log(t),ae.Am.success("Se ha eliminado el artículo correctamente",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}),this.items=this.items.filter((t=>t.id!==e.id))})).catch((e=>{console.log(e)}))}))},toggleItemStatus(e){console.log(e),Me().fire({title:"¿Estás seguro?",text:`Se ${"active"===e.status?"desactivará":"activará"} el artículo ${e.name}. ${"active"===e.status?"No se podrá realizar ninguna operación con este artículo.":""}`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Sí, "+("active"===e.status?"desactivarlo":"activarlo"),cancelButtonText:"Cancelar"}).then((t=>{t.isConfirmed&&ee.Z.put(te+"/items/"+e.id+"/toggle_status",{id:e.id,user:this.$store.state.user.id}).then((t=>{console.log(t),ae.Am.success(`Se ha ${"active"===e.status?"desactivado":"activado"} el artículo correctamente`,{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}),e.status="active"===e.status?"inactive":"active"})).catch((e=>{console.log(e)}))}))}},mounted(){this.$state.navbarTitle="Lista de Artículos",ee.Z.get(te+"/items").then((e=>{console.log(e),this.items=e.data})).catch((e=>{console.log(e)}))}};const Mr=(0,re.Z)(Fr,[["render",Pr],["__scopeId","data-v-18b2d9c2"]]);var qr=Mr;const Nr=e=>((0,c.dD)("data-v-f9651214"),e=e(),(0,c.Cn)(),e),Yr={class:"container"},Kr={class:"row"},Rr={class:"col-md-8 offset-md-2"},Qr=Nr((()=>(0,c._)("h3",null,"Usuarios en el sistema",-1))),Gr={class:"mb-3 mt-3"},Jr=Nr((()=>(0,c._)("label",{for:"search",class:"form-label"},"Buscar usuario:",-1))),Xr={class:"col-md-12"},ei={class:"table-container",style:{"max-height":"650px !important"}},ti={class:"table table-bordered"},ai=Nr((()=>(0,c._)("thead",null,[(0,c._)("tr",null,[(0,c._)("th",null,"Nombre"),(0,c._)("th",null,"Cédula"),(0,c._)("th",null,"Estado"),(0,c._)("th",null,"Rol"),(0,c._)("th",null,"Email"),(0,c._)("th",null,"Acciones")])],-1))),si=["onClick"];function oi(e,t,a,o,n,r){return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c.wy)((0,c._)("input",{type:"checkbox",id:"check","onUpdate:modelValue":t[0]||(t[0]=e=>r.checked=e),onChange:t[1]||(t[1]=(...e)=>r.handleCheckboxChange&&r.handleCheckboxChange(...e))},null,544),[[s.e8,r.checked]]),(0,c._)("div",Yr,[(0,c._)("div",Kr,[(0,c._)("div",Rr,[Qr,(0,c._)("div",Gr,[Jr,(0,c.wy)((0,c._)("input",{type:"text",id:"search",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>n.searchQuery=e),placeholder:"Buscar por nombre o cédula"},null,512),[[s.nr,n.searchQuery]])]),(0,c._)("div",Xr,[(0,c._)("button",{onClick:t[3]||(t[3]=(...e)=>r.addUser&&r.addUser(...e)),class:"btn btn-success"}," Agregar usuario ")]),(0,c._)("div",ei,[(0,c._)("table",ti,[ai,(0,c._)("tbody",null,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(r.filteredUsers,(e=>((0,c.wg)(),(0,c.iD)("tr",{key:e.id},[(0,c._)("td",null,(0,d.zw)(e.name),1),(0,c._)("td",null,(0,d.zw)(e.id_card),1),(0,c._)("td",null,(0,d.zw)("active"===e.status?"Activo":"Inactivo"),1),(0,c._)("td",null,(0,d.zw)("admin"===e.role?"Administrador":"Usuario regular"),1),(0,c._)("td",null,(0,d.zw)(e.email),1),(0,c._)("td",null,[(0,c._)("button",{onClick:t=>r.deactivateUser(e),class:"btn btn-danger"},(0,d.zw)("active"===e.status?"Desactivar":"Activar"),9,si)])])))),128))])])])])])])],64)}var ni={name:"UserList",data(){return{users:[],searchQuery:"",current_user_id:""}},computed:{...(0,r.rn)(["checkboxValue"]),checked:{get(){return this.checkboxValue}},filteredUsers(){return this.users.filter((e=>e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.id_card.toLowerCase().includes(this.searchQuery.toLowerCase())))}},methods:{...(0,r.OI)(["toggleCheckboxValue"]),handleCheckboxChange(){this.toggleCheckboxValue()},addUser(){this.$router.push({name:"AddUser"})},deactivateUser(e){"active"===e.status?Me().fire({title:"¿Estás seguro?",text:"El usuario será desactivado y no podrá acceder al sistema",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Desactivar",cancelButtonText:"Cancelar"}).then((t=>{t.isConfirmed&&ee.Z.put(te+"/users/"+e.id,{status:"inactive",creator_user_id:this.current_user_id}).then((t=>{ae.Am.success("Usuario desactivado correctamente",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}),console.log(t.data),this.users=this.users.map((t=>(t.id===e.id&&(t.status="inactive"),t)))})).catch((e=>{console.log(e)}))})):Me().fire({title:"¿Estás seguro?",text:"El usuario será activado y podrá acceder al sistema",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Activar",cancelButtonText:"Cancelar"}).then((t=>{t.isConfirmed&&ee.Z.put(te+"/users/"+e.id,{status:"active",creator_user_id:this.current_user_id}).then((t=>{ae.Am.success("Usuario activado correctamente",{position:"top-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}),console.log(t.data),this.users=this.users.map((t=>(t.id===e.id&&(t.status="active"),t)))})).catch((e=>{console.log(e)}))}))}},mounted(){this.$state.navbarTitle="Lista de usuarios",ee.Z.get(te+"/users").then((e=>{this.users=e.data})).catch((e=>{console.log(e)})),this.current_user_id=this.$store.state.user.id}};const ri=(0,re.Z)(ni,[["render",oi],["__scopeId","data-v-f9651214"]]);var ii=ri;const li=e=>((0,c.dD)("data-v-e5a81f14"),e=e(),(0,c.Cn)(),e),ci={class:"container"},di=li((()=>(0,c._)("h3",null,"Filtros",-1))),ui={class:"form-row"},mi={class:"form-group col-md-3"},hi=li((()=>(0,c._)("label",{for:"code"},"Código",-1))),_i={class:"form-group col-md-3"},gi=li((()=>(0,c._)("label",{for:"articleCode"},"Código del artículo",-1))),pi={class:"form-group col-md-3"},bi=li((()=>(0,c._)("label",{for:"fromDate"},"Fecha (desde)",-1))),fi={class:"form-group col-md-3"},vi=li((()=>(0,c._)("label",{for:"toDate"},"Fecha (hasta)",-1))),wi={class:"container"},yi={class:"row"},ki={class:"mt-3 mb-4"},Ci=li((()=>(0,c._)("h3",null,"Salidas",-1))),xi={class:"table-container"},Di={class:"table table-striped table-hover"},Ii=li((()=>(0,c._)("thead",null,[(0,c._)("tr",null,[(0,c._)("th",null,"Código"),(0,c._)("th",null,"Usuario"),(0,c._)("th",null,"Artículos removidos"),(0,c._)("th",null,"Bodega"),(0,c._)("th",null,"Fecha"),(0,c._)("th",null,"Acciones")])],-1))),Si=["href"],Oi={class:"mt-3 mb-4"},Vi=li((()=>(0,c._)("h3",null,"Entradas",-1))),Ai={class:"table-container"},Ti={class:"table table-hover table-striped"},$i=li((()=>(0,c._)("thead",null,[(0,c._)("tr",null,[(0,c._)("th",null,"Código"),(0,c._)("th",null,"Usuario"),(0,c._)("th",null,"Artículos ingresados"),(0,c._)("th",null,"Bodega"),(0,c._)("th",null,"Fecha"),(0,c._)("th",null,"Acciones")])],-1))),Ui=["href"],Li={class:"mt-3 mb-4"},ji=li((()=>(0,c._)("h3",null,"Transferencias",-1))),zi={class:"table-container"},Ei={class:"table"},Bi=li((()=>(0,c._)("thead",null,[(0,c._)("tr",null,[(0,c._)("th",null,"Código"),(0,c._)("th",null,"Usuario"),(0,c._)("th",null,"Artículos Tranferidos"),(0,c._)("th",null,"Bodega emisora"),(0,c._)("th",null,"Bodega receptora"),(0,c._)("th",null,"Fecha de Creación"),(0,c._)("th",null,"Acciones")])],-1))),Hi=["href"];function Wi(e,t,a,o,n,r){return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c.wy)((0,c._)("input",{type:"checkbox",id:"check","onUpdate:modelValue":t[0]||(t[0]=e=>r.checked=e),onChange:t[1]||(t[1]=(...e)=>r.handleCheckboxChange&&r.handleCheckboxChange(...e))},null,544),[[s.e8,r.checked]]),(0,c._)("div",null,[(0,c._)("div",ci,[di,(0,c._)("div",ui,[(0,c._)("div",mi,[hi,(0,c.wy)((0,c._)("input",{type:"text",class:"form-control",id:"code","onUpdate:modelValue":t[2]||(t[2]=e=>n.searchIdentifier=e)},null,512),[[s.nr,n.searchIdentifier]])]),(0,c._)("div",_i,[gi,(0,c.wy)((0,c._)("input",{type:"text",class:"form-control",id:"articleCode","onUpdate:modelValue":t[3]||(t[3]=e=>n.searchArticleCode=e)},null,512),[[s.nr,n.searchArticleCode]])]),(0,c._)("div",pi,[bi,(0,c.wy)((0,c._)("input",{type:"date",class:"form-control",id:"fromDate","onUpdate:modelValue":t[4]||(t[4]=e=>n.searchFromDate=e)},null,512),[[s.nr,n.searchFromDate]])]),(0,c._)("div",fi,[vi,(0,c.wy)((0,c._)("input",{type:"date",class:"form-control",id:"toDate","onUpdate:modelValue":t[5]||(t[5]=e=>n.searchToDate=e)},null,512),[[s.nr,n.searchToDate]])])])]),(0,c._)("div",wi,[(0,c._)("div",yi,[(0,c._)("div",ki,[Ci,(0,c._)("div",xi,[(0,c._)("table",Di,[Ii,(0,c._)("tbody",null,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(r.filteredTransactions("S"),(e=>((0,c.wg)(),(0,c.iD)("tr",{key:e.id},[(0,c._)("td",null,(0,d.zw)(e.identifier),1),(0,c._)("td",null,(0,d.zw)(e.user.name),1),(0,c._)("td",null,(0,d.zw)(e.items_moved),1),(0,c._)("td",null,(0,d.zw)(e.to_warehouse.name),1),(0,c._)("td",null,(0,d.zw)(r.formatDate(e.created_at)),1),(0,c._)("td",null,[(0,c._)("a",{href:e.pdf_url,target:"_blank",class:"btn btn-success"},"Descargar PDF",8,Si)])])))),128))])])])]),(0,c._)("div",Oi,[Vi,(0,c._)("div",Ai,[(0,c._)("table",Ti,[$i,(0,c._)("tbody",null,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(r.filteredTransactions("E"),(e=>((0,c.wg)(),(0,c.iD)("tr",{key:e.id},[(0,c._)("td",null,(0,d.zw)(e.identifier),1),(0,c._)("td",null,(0,d.zw)(e.user.name),1),(0,c._)("td",null,(0,d.zw)(e.items_moved),1),(0,c._)("td",null,(0,d.zw)(e.to_warehouse.name),1),(0,c._)("td",null,(0,d.zw)(r.formatDate(e.created_at)),1),(0,c._)("td",null,[(0,c._)("a",{href:e.pdf_url,target:"_blank",class:"btn btn-success"},"Descargar PDF",8,Ui)])])))),128))])])])]),(0,c._)("div",Li,[ji,(0,c._)("div",zi,[(0,c._)("table",Ei,[Bi,(0,c._)("tbody",null,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(r.filteredTransactions("T"),(e=>((0,c.wg)(),(0,c.iD)("tr",{key:e.id},[(0,c._)("td",null,(0,d.zw)(e.identifier),1),(0,c._)("td",null,(0,d.zw)(e.user.name),1),(0,c._)("td",null,(0,d.zw)(e.items_moved),1),(0,c._)("td",null,(0,d.zw)(e.from_warehouse.name),1),(0,c._)("td",null,(0,d.zw)(e.to_warehouse.name),1),(0,c._)("td",null,(0,d.zw)(r.formatDate(e.created_at)),1),(0,c._)("td",null,[(0,c._)("a",{href:e.pdf_url,target:"_blank",class:"btn btn-success"},"Descargar PDF",8,Hi)])])))),128))])])])])])])])],64)}var Zi={name:"TransactionList",data(){return{transactions:[],searchIdentifier:"",searchArticleCode:"",searchFromDate:"",searchToDate:""}},computed:{...(0,r.rn)(["checkboxValue"]),checked:{get(){return this.checkboxValue}},filteredTransactions(){return e=>this.transactions.filter((t=>{const a=t.identifier.includes(this.searchIdentifier),s=t.movements.some((e=>e.item.id===this.searchArticleCode||e.item.name.includes(this.searchArticleCode))),o=(!this.searchFromDate||t.created_at>=this.searchFromDate)&&(!this.searchToDate||t.created_at<=this.searchToDate);return a&&s&&o&&t.type===e}))}},methods:{...(0,r.OI)(["toggleCheckboxValue"]),handleCheckboxChange(){this.toggleCheckboxValue()},fetchTransactions(){ee.Z.get(`${te}/transactions`).then((e=>{this.transactions=e.data.transactions.map((e=>({...e,pdf_url:`${te}/transactions/${e.id}`})))})).catch((e=>{console.log(e)}))},formatDate(e){return new Date(e).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"2-digit"})}},mounted(){this.fetchTransactions(),this.$state.navbarTitle="Registro de movimientos"}};const Pi=(0,re.Z)(Zi,[["render",Wi],["__scopeId","data-v-e5a81f14"]]);var Fi=Pi;const Mi=e=>((0,c.dD)("data-v-39afea52"),e=e(),(0,c.Cn)(),e),qi={class:"add-item container"},Ni={class:"mb-lg-5"},Yi=Mi((()=>(0,c._)("div",{class:"text-center mb-lg-2"},[(0,c._)("h2",null,"Detalles del artículo")],-1))),Ki={class:"table-responsive-lg"},Ri={class:"table table-bordered table-secondary"},Qi=Mi((()=>(0,c._)("td",{class:"table-label"},"Código:",-1))),Gi={class:"table-input",colspan:"5"},Ji={class:"input-group"},Xi=Mi((()=>(0,c._)("span",{class:"input-group-text"},[(0,c._)("i",{class:"bi bi-123"})],-1))),el=["readonly"],tl=Mi((()=>(0,c._)("td",{class:"table-label"},"Nombre:",-1))),al={class:"table-input",colspan:"5"},sl={class:"input-group"},ol=Mi((()=>(0,c._)("span",{class:"input-group-text"},[(0,c._)("i",{class:"bi bi-person-badge-fill"})],-1))),nl=["readonly"],rl=Mi((()=>(0,c._)("td",{class:"table-label"},"Stock Mínimo:",-1))),il={class:"table-input",colspan:"2"},ll={class:"input-group"},cl=Mi((()=>(0,c._)("span",{class:"input-group-text"},[(0,c._)("i",{class:"bi bi-dash-square-fill"})],-1))),dl=["readonly"],ul=Mi((()=>(0,c._)("td",{class:"table-label"},"Factor de Conversión:",-1))),ml={class:"table-input",colspan:"2"},hl={class:"input-group"},_l=(0,c.uE)('<div class="item" style="margin-right:8px;margin-top:6px;height:15px;" data-v-39afea52><i class="bi bi-info-circle" style="font-size:15px;" data-v-39afea52></i><div class="text-area" data-v-39afea52><span class="text" data-v-39afea52>Factor de conversión corresponde a cuántas unidades de venta equivalen a 1 unidad de inventario</span></div></div><span class="input-group-text" data-v-39afea52><i class="bi bi-input-cursor" data-v-39afea52></i></span>',2),gl=["readonly"],pl=Mi((()=>(0,c._)("td",{class:"table-label"},"Unidades de Inventario:",-1))),bl={class:"table-input",colspan:"2"},fl={class:"input-group"},vl=Mi((()=>(0,c._)("span",{class:"input-group-text"},[(0,c._)("i",{class:"bi bi-postcard"})],-1))),wl=["readonly"],yl=Mi((()=>(0,c._)("td",{class:"table-label"},"Unidades de Venta:",-1))),kl={class:"table-input",colspan:"2"},Cl={class:"input-group"},xl=Mi((()=>(0,c._)("span",{class:"input-group-text"},[(0,c._)("i",{class:"bi bi-postcard"})],-1))),Dl=["readonly"],Il=Mi((()=>(0,c._)("td",{class:"table-label"},"Categoría:",-1))),Sl={class:"table-input",colspan:"5"},Ol={class:"input-group"},Vl=Mi((()=>(0,c._)("span",{class:"input-group-text"},[(0,c._)("i",{class:"bi bi-tag-fill"})],-1))),Al=["disabled"],Tl=Mi((()=>(0,c._)("option",{value:"",disabled:""},"Seleccionar categoría",-1))),$l=["value"],Ul=Mi((()=>(0,c._)("td",{class:"table-label"},"Subcategoría:",-1))),Ll={class:"table-input",colspan:"5"},jl={class:"input-group"},zl=Mi((()=>(0,c._)("span",{class:"input-group-text"},[(0,c._)("i",{class:"bi bi-tags"})],-1))),El=["disabled"],Bl=Mi((()=>(0,c._)("option",{value:"",disabled:"",selected:""}," Seleccionar subcategoría ",-1))),Hl=["value"],Wl=Mi((()=>(0,c._)("td",{class:"table-label"},"Diseño:",-1))),Zl={class:"table-input",colspan:"5"},Pl={class:"input-group"},Fl=Mi((()=>(0,c._)("span",{class:"input-group-text"},[(0,c._)("i",{class:"bi bi-x-diamond-fill"})],-1))),Ml=["disabled"],ql=Mi((()=>(0,c._)("option",{value:""},"No posee",-1))),Nl=["value"],Yl=Mi((()=>(0,c._)("td",{class:"table-label"},"Marca:",-1))),Kl={class:"table-input",colspan:"5"},Rl={class:"input-group"},Ql=Mi((()=>(0,c._)("span",{class:"input-group-text"},[(0,c._)("i",{class:"bi bi-medium"})],-1))),Gl=["disabled"],Jl=Mi((()=>(0,c._)("option",{value:""},"No posee",-1))),Xl=["value"],ec={key:0,class:"mt-lg-4 mb-lg-5"},tc={class:"row"},ac=Mi((()=>(0,c._)("div",{class:"text-center"},[(0,c._)("h4",null,"Inventario en bodegas")],-1))),sc={class:"mt-lg-1 table-responsive-lg"},oc=Mi((()=>(0,c._)("thead",null,[(0,c._)("tr",null,[(0,c._)("th",{class:"text-center"},"Bodega"),(0,c._)("th",{class:"text-center"},"Stock en bodega")])],-1))),nc={class:"text-center"},rc={class:"text-center"},ic=Mi((()=>(0,c._)("td",{class:"text-center fw-bold"},"Total",-1))),lc={class:"text-center fw-bold"},cc={class:"text-center mt-lg-4"},dc={key:0,type:"submit",class:"btn btn-primary btn-save"};function uc(e,t,a,o,n,r){const i=(0,c.up)("router-link");return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c.wy)((0,c._)("input",{type:"checkbox",id:"check","onUpdate:modelValue":t[0]||(t[0]=e=>r.checked=e),onChange:t[1]||(t[1]=(...e)=>r.handleCheckboxChange&&r.handleCheckboxChange(...e))},null,544),[[s.e8,r.checked]]),(0,c._)("div",qi,[(0,c._)("form",{class:"form-estilo",onSubmit:t[14]||(t[14]=(0,s.iM)(((...e)=>r.onSubmit&&r.onSubmit(...e)),["prevent"]))},[(0,c._)("div",Ni,[Yi,(0,c._)("div",Ki,[(0,c._)("table",Ri,[(0,c._)("tbody",null,[(0,c._)("tr",null,[Qi,(0,c._)("td",Gi,[(0,c._)("div",Ji,[Xi,(0,c.wy)((0,c._)("input",{type:"text",id:"id",class:"form-control",readonly:n.isReadOnly,"onUpdate:modelValue":t[2]||(t[2]=e=>n.id=e)},null,8,el),[[s.nr,n.id]])])])]),(0,c._)("tr",null,[tl,(0,c._)("td",al,[(0,c._)("div",sl,[ol,(0,c.wy)((0,c._)("input",{type:"text",id:"name",class:"form-control",readonly:n.isReadOnly,"onUpdate:modelValue":t[3]||(t[3]=e=>n.name=e)},null,8,nl),[[s.nr,n.name]])])])]),(0,c._)("tr",null,[rl,(0,c._)("td",il,[(0,c._)("div",ll,[cl,(0,c.wy)((0,c._)("input",{type:"number",id:"minimal_stock",class:"form-control","onUpdate:modelValue":t[4]||(t[4]=e=>n.minimal_stock=e),readonly:n.isReadOnly},null,8,dl),[[s.nr,n.minimal_stock]])])]),ul,(0,c._)("td",ml,[(0,c._)("div",hl,[_l,(0,c.wy)((0,c._)("input",{type:"number",id:"conversion_factor",class:"form-control","onUpdate:modelValue":t[5]||(t[5]=e=>n.conversion_factor=e),readonly:n.isReadOnly},null,8,gl),[[s.nr,n.conversion_factor]])])])]),(0,c._)("tr",null,[pl,(0,c._)("td",bl,[(0,c._)("div",fl,[vl,(0,c.wy)((0,c._)("input",{type:"text",id:"storing_format_units_name",class:"form-control","onUpdate:modelValue":t[6]||(t[6]=e=>n.storing_format_units_name=e),readonly:n.isReadOnly},null,8,wl),[[s.nr,n.storing_format_units_name]])])]),yl,(0,c._)("td",kl,[(0,c._)("div",Cl,[xl,(0,c.wy)((0,c._)("input",{type:"text",id:"transferring_format_units_name",class:"form-control","onUpdate:modelValue":t[7]||(t[7]=e=>n.transferring_format_units_name=e),readonly:n.isReadOnly},null,8,Dl),[[s.nr,n.transferring_format_units_name]])])])]),(0,c._)("tr",null,[Il,(0,c._)("td",Sl,[(0,c._)("div",Ol,[Vl,(0,c.wy)((0,c._)("select",{id:"category",class:"form-select","onUpdate:modelValue":t[8]||(t[8]=e=>n.filter.category=e),onChange:t[9]||(t[9]=(...e)=>r.onCategoryChange&&r.onCategoryChange(...e)),disabled:n.isReadOnly},[Tl,((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(n.categories,(e=>((0,c.wg)(),(0,c.iD)("option",{value:e.name,key:e.name},(0,d.zw)(e.name),9,$l)))),128))],40,Al),[[s.bM,n.filter.category]])])])]),(0,c._)("tr",null,[Ul,(0,c._)("td",Ll,[(0,c._)("div",jl,[zl,(0,c.wy)((0,c._)("select",{id:"subcategory",class:"form-select","onUpdate:modelValue":t[10]||(t[10]=e=>n.subcategory_id=e),disabled:n.isReadOnly},[Bl,((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(r.filteredSubcategories,(e=>((0,c.wg)(),(0,c.iD)("option",{value:e.id,key:e.name},(0,d.zw)(e.name),9,Hl)))),128))],8,El),[[s.bM,n.subcategory_id]])])])]),(0,c._)("tr",null,[Wl,(0,c._)("td",Zl,[(0,c._)("div",Pl,[Fl,(0,c.wy)((0,c._)("select",{id:"design",class:"form-select","onUpdate:modelValue":t[11]||(t[11]=e=>n.design_id=e),disabled:n.isReadOnly},[ql,((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(n.designs,(e=>((0,c.wg)(),(0,c.iD)("option",{value:e.id,key:e.id},(0,d.zw)(e.name),9,Nl)))),128))],8,Ml),[[s.bM,n.design_id]])])])]),(0,c._)("tr",null,[Yl,(0,c._)("td",Kl,[(0,c._)("div",Rl,[Ql,(0,c.wy)((0,c._)("select",{id:"brand",class:"form-select","onUpdate:modelValue":t[12]||(t[12]=e=>n.brand_id=e),disabled:n.isReadOnly},[Jl,((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(n.brands,(e=>((0,c.wg)(),(0,c.iD)("option",{value:e.id,key:e.id},(0,d.zw)(e.name),9,Xl)))),128))],8,Gl),[[s.bM,n.brand_id]])])])])])])])]),n.isReadOnly?((0,c.wg)(),(0,c.iD)("div",ec,[(0,c._)("div",tc,[ac,(0,c._)("div",sc,[(0,c._)("table",{class:(0,d.C_)(["table table-hover table-secondary table-striped",{"table-sm":n.isSmallScreen}])},[oc,(0,c._)("tbody",null,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(n.inventory_items,(e=>((0,c.wg)(),(0,c.iD)("tr",{key:e.id},[(0,c._)("td",nc,(0,d.zw)(e.warehouse),1),(0,c._)("td",rc,(0,d.zw)(e.storing_format_units)+" "+(0,d.zw)(n.storing_format_units_name),1)])))),128)),(0,c._)("tr",null,[ic,(0,c._)("td",lc,(0,d.zw)(r.calculateStockUnits())+" "+(0,d.zw)(n.storing_format_units_name),1)])])],2)])])])):(0,c.kq)("",!0),(0,c._)("div",cc,[n.isReadOnly?(0,c.kq)("",!0):((0,c.wg)(),(0,c.iD)("button",dc," Guardar ")),(0,c.Wm)(i,{to:"#",onClick:t[13]||(t[13]=e=>r.goToPreviousPage()),type:"button",class:"btn btn-danger btn-save"},{default:(0,c.w5)((()=>[(0,c.Uk)(" Volver ")])),_:1})])],32)])],64)}var mc={data(){return{filter:{category:""},id:"",name:"",minimal_stock:"",storing_format_units_name:"",transferring_format_units_name:"",conversion_factor:"",subcategory_id:"",design_id:"",brand_id:"",categories:[],designs:[],brands:[],inventory_items:[],isReadOnly:!1,mode:"",isSmallScreen:!1}},computed:{...(0,r.rn)(["checkboxValue"]),checked:{get(){return this.checkboxValue}},filteredSubcategories(){const e=this.categories.find((e=>e.name===this.filter.category));return e?e.subcategories:[]}},created(){const e=this.$route.params.id;e?this.fetchItemData(e):this.fetchNewItemData(),window.location.href.includes("details")&&(this.isReadOnly=!0,this.$state.navbarTitle="Detalles")},mounted(){this.checkScreenSize(),window.addEventListener("resize",this.checkScreenSize)},beforeUnmount(){window.removeEventListener("resize",this.checkScreenSize)},methods:{...(0,r.OI)(["toggleCheckboxValue"]),handleCheckboxChange(){this.toggleCheckboxValue()},onCategoryChange(){this.filter.subcategory=""},calculateStockUnits(){let e=0;return this.inventory_items.forEach((t=>{const a=parseFloat(t.storing_format_units);isNaN(a)||(e+=a)})),e},fetchNewItemData(){this.$state.navbarTitle="Agregar Nuevo Artículo",this.mode="new",ee.Z.get(`${te}/new_item`).then((e=>{this.categories=e.data.categories,this.designs=e.data.designs,this.brands=e.data.brands})).catch((e=>{console.log(e)}))},fetchItemData(e){this.mode="edit",this.$state.navbarTitle="Editar Artículo",ee.Z.get(`${te}/new_item`).then((e=>{this.categories=e.data.categories,this.designs=e.data.designs,this.brands=e.data.brands})).catch((e=>{console.log(e)})),ee.Z.get(`${te}/items/${e}`).then((e=>{const t=e.data;this.id=t.item.id,this.name=t.item.name,this.minimal_stock=t.item.minimal_stock,this.storing_format_units_name=t.item.storing_format_units_name,this.transferring_format_units_name=t.item.transferring_format_units_name,this.conversion_factor=t.item.conversion_factor,this.filter.category=t.item.category_name,this.subcategory_id=t.item.subcategory_id,this.design_id=t.item.design_id||"",this.brand_id=t.item.brand_id||"",this.inventory_items=t.inventory_items})).catch((e=>{console.log(e)}))},onSubmit(){let e={id:this.id,name:this.name,minimal_stock:this.minimal_stock,storing_format_units_name:this.storing_format_units_name,transferring_format_units_name:this.transferring_format_units_name,conversion_factor:this.conversion_factor,subcategory_id:this.subcategory_id,design_id:this.design_id,brand_id:this.brand_id,image:this.image};e.user=this.$store.state.user.id,"edit"===this.mode?this.updateItem(e):this.createItem(e)},updateItem(e){ee.Z.put(`${te}/items/${e.id}`,e).then((async()=>{ae.Am.success("Artículo actualizado exitosamente",{timeout:2e3}),await new Promise((e=>setTimeout(e,2e3))),this.$router.push("/items")})).catch((async e=>{console.log(e),await new Promise((e=>setTimeout(e,2e3))),ae.Am.error("Error al actualizar artículo",{closeOnClick:!1})}))},goToPreviousPage(){this.$router.go(-1)},createItem(e){ee.Z.post(`${te}/items`,e).then((async()=>{ae.Am.success("Artículo creado exitosamente",{timeout:2e3}),await new Promise((e=>setTimeout(e,2e3))),this.$router.push("/items")})).catch((async e=>{console.log(e),await new Promise((e=>setTimeout(e,2e3))),ae.Am.error("Error al crear artículo",{closeOnClick:!1})}))},checkScreenSize(){this.isSmallScreen=window.innerWidth<1e3}}};const hc=(0,re.Z)(mc,[["render",uc],["__scopeId","data-v-39afea52"]]);var _c=hc;const gc=e=>((0,c.dD)("data-v-710d4ce3"),e=e(),(0,c.Cn)(),e),pc={class:"container"},bc={class:"table-responsive"},fc={class:"table table-bordered table-secondary"},vc=gc((()=>(0,c._)("td",{class:"table-label"},"Nombre de la categoría:",-1))),wc={class:"table-input",colspan:"5"},yc={class:"input-group"},kc=gc((()=>(0,c._)("span",{class:"input-group-text"},[(0,c._)("i",{class:"bi bi-tag-fill"})],-1))),Cc=["disabled"],xc={class:"d-flex justify-content-end"},Dc={key:0,class:"btn btn-primary",type:"submit"},Ic={key:1,class:"btn btn-danger",type:"submit"};function Sc(e,t,a,o,n,r){const i=(0,c.up)("router-link");return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c.wy)((0,c._)("input",{type:"checkbox",id:"check","onUpdate:modelValue":t[0]||(t[0]=e=>r.checked=e),onChange:t[1]||(t[1]=(...e)=>r.handleCheckboxChange&&r.handleCheckboxChange(...e))},null,544),[[s.e8,r.checked]]),(0,c._)("div",pc,[(0,c._)("form",{onSubmit:t[3]||(t[3]=(0,s.iM)(((...e)=>r.onSubmit&&r.onSubmit(...e)),["prevent"]))},[(0,c._)("div",bc,[(0,c._)("table",fc,[(0,c._)("tbody",null,[(0,c._)("tr",null,[vc,(0,c._)("td",wc,[(0,c._)("div",yc,[kc,(0,c.wy)((0,c._)("input",{type:"text",class:"form-control",id:"category",name:"category","onUpdate:modelValue":t[2]||(t[2]=e=>n.name=e),disabled:n.isReadOnly},null,8,Cc),[[s.nr,n.name]])])])])])])]),(0,c._)("div",xc,[n.isReadOnly?(0,c.kq)("",!0):((0,c.wg)(),(0,c.iD)("button",Dc," Guardar cambios ")),n.isReadOnly?((0,c.wg)(),(0,c.iD)("button",Ic," Volver ")):(0,c.kq)("",!0),(0,c.Wm)(i,{to:"/categories",class:"btn btn-danger"},{default:(0,c.w5)((()=>[(0,c.Uk)("Cancelar")])),_:1})])],32)])],64)}var Oc={data(){return{name:"",isReadOnly:!1,type:""}},created(){const e=this.$route.params.id;e?(this.type="edit",this.fetchCategoryData(e)):(this.type="new",this.isReadOnly=!1)},computed:{...(0,r.rn)(["checkboxValue"]),checked:{get(){return this.checkboxValue}}},methods:{...(0,r.OI)(["toggleCheckboxValue"]),handleCheckboxChange(){this.toggleCheckboxValue()},onSubmit(){let e={category:{name:this.name}};e.user=this.$store.state.user.id,"new"===this.type?this.createCategory(e):this.updateCategory(e)},createCategory(e){ee.Z.post(`${te}/categories`,e).then((async e=>{console.log(e),ae.Am.success("Categoría creada exitosamente",{timeout:2e3}),await new Promise((e=>setTimeout(e,2e3))),this.$router.push("/categories")})).catch((async e=>{console.log(e),ae.Am.error("Error al crear la categoría",{closeOnClick:!1}),await new Promise((e=>setTimeout(e,2e3)))}))},updateCategory(e){const t=this.$route.params.id;ee.Z.put(`${te}/categories/${t}`,e).then((async e=>{console.log(e),ae.Am.success("Categoría actualizada exitosamente",{timeout:5e3}),await new Promise((e=>setTimeout(e,2e3))),this.$router.push("/categories")})).catch((async e=>{console.log(e),ae.Am.error("Error al actualizar la categoría",{closeOnClick:!1}),await new Promise((e=>setTimeout(e,2e3)))}))},fetchCategoryData(e){ee.Z.get(`${te}/categories/${e}`).then((e=>{const t=e.data;this.name=t.name})).catch((e=>{console.log(e)}))}},mounted(){this.$state.navbarTitle="Agregar Nueva Categoría"}};const Vc=(0,re.Z)(Oc,[["render",Sc],["__scopeId","data-v-710d4ce3"]]);var Ac=Vc;const Tc=e=>((0,c.dD)("data-v-72d10d8c"),e=e(),(0,c.Cn)(),e),$c={class:"container"},Uc={class:"table-responsive"},Lc={class:"table table-bordered table-secondary"},jc=Tc((()=>(0,c._)("td",{class:"table-label"},"Marca:",-1))),zc={class:"table-input",colspan:"5"},Ec={class:"input-group"},Bc=Tc((()=>(0,c._)("span",{class:"input-group-text"},[(0,c._)("i",{class:"bi bi-medium"})],-1))),Hc=["disabled"],Wc={class:"d-flex justify-content-end"},Zc={key:0,class:"btn btn-primary",type:"submit"},Pc={key:1,class:"btn btn-primary",type:"submit"};function Fc(e,t,a,o,n,r){const i=(0,c.up)("router-link");return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c.wy)((0,c._)("input",{type:"checkbox",id:"check","onUpdate:modelValue":t[0]||(t[0]=e=>r.checked=e),onChange:t[1]||(t[1]=(...e)=>r.handleCheckboxChange&&r.handleCheckboxChange(...e))},null,544),[[s.e8,r.checked]]),(0,c._)("div",$c,[(0,c._)("form",{onSubmit:t[3]||(t[3]=(0,s.iM)(((...e)=>r.onSubmit&&r.onSubmit(...e)),["prevent"]))},[(0,c._)("div",Uc,[(0,c._)("table",Lc,[(0,c._)("tbody",null,[(0,c._)("tr",null,[jc,(0,c._)("td",zc,[(0,c._)("div",Ec,[Bc,(0,c.wy)((0,c._)("input",{type:"text",class:"form-control",id:"brand",name:"brand","onUpdate:modelValue":t[2]||(t[2]=e=>n.name=e),disabled:n.isReadOnly},null,8,Hc),[[s.nr,n.name]])])])])])])]),(0,c._)("div",Wc,[n.isReadOnly?(0,c.kq)("",!0):((0,c.wg)(),(0,c.iD)("button",Zc," Guardar ")),n.isReadOnly?((0,c.wg)(),(0,c.iD)("button",Pc," Guardar cambios ")):(0,c.kq)("",!0),(0,c.Wm)(i,{to:"/brands",class:"btn btn-danger"},{default:(0,c.w5)((()=>[(0,c.Uk)("Cancelar")])),_:1})])],32)])],64)}var Mc={data(){return{name:"",isReadOnly:!1,type:""}},created(){const e=this.$route.params.id;e?(this.type="edit",this.fetchBrandData(e)):(this.isReadOnly=!1,this.type="new")},mounted(){this.$state.navbarTitle="Agregar Nueva Marca"},computed:{...(0,r.rn)(["checkboxValue"]),checked:{get(){return this.checkboxValue}}},methods:{...(0,r.OI)(["toggleCheckboxValue"]),handleCheckboxChange(){this.toggleCheckboxValue()},onSubmit(){let e={brand:{name:this.name}};e.user=this.$store.state.user.id,"new"===this.type?this.createBrand(e):this.updateBrand(e)},async createBrand(e){ee.Z.post(`${te}/brands`,e).then((async e=>{console.log(e),ae.Am.success("Marca creada exitosamente",{timeout:2e3}),await new Promise((e=>setTimeout(e,2e3))),this.$router.push("/brands")})).catch((e=>{ae.Am.error("Error al crear la marca",{closeOnClick:!1}),console.log(e)}))},updateBrand(e){const t=this.$route.params.id;ee.Z.put(`${te}/brands/${t}`,e).then((async e=>{console.log(e),ae.Am.success("Marca actualizada exitosamente",{closeOnClick:!1}),await new Promise((e=>setTimeout(e,2e3))),this.$router.push("/brands")})).catch((async e=>{ae.Am.error("Error al actualizar la marca",{closeOnClick:!1}),await new Promise((e=>setTimeout(e,2e3))),console.log(e)}))},fetchBrandData(e){ee.Z.get(`${te}/brands/${e}`).then((e=>{const t=e.data;this.name=t.name})).catch((e=>{console.log(e)}))}}};const qc=(0,re.Z)(Mc,[["render",Fc],["__scopeId","data-v-72d10d8c"]]);var Nc=qc;const Yc=e=>((0,c.dD)("data-v-4381caed"),e=e(),(0,c.Cn)(),e),Kc={class:"container"},Rc={class:"table-responsive"},Qc={class:"table table-bordered table-secondary"},Gc=Yc((()=>(0,c._)("td",{class:"table-label"},"Ingrese el nombre de la subcategoría:",-1))),Jc={class:"table-input"},Xc=["disabled"],ed=Yc((()=>(0,c._)("td",{class:"table-label"}," Seleccione la categoría a la que se asociará esta subcategoría: ",-1))),td={class:"table-input"},ad=["disabled"],sd=Yc((()=>(0,c._)("option",{value:"",disabled:"",selected:""}," Seleccione una categoría ",-1))),od=["value"],nd={class:"d-flex justify-content-end"},rd={key:0,class:"btn btn-primary",type:"submit"},id={key:1,class:"btn btn-danger",type:"submit"};function ld(e,t,a,o,n,r){const i=(0,c.up)("router-link");return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c.wy)((0,c._)("input",{type:"checkbox",id:"check","onUpdate:modelValue":t[0]||(t[0]=e=>r.checked=e),onChange:t[1]||(t[1]=(...e)=>r.handleCheckboxChange&&r.handleCheckboxChange(...e))},null,544),[[s.e8,r.checked]]),(0,c._)("div",Kc,[(0,c._)("form",{onSubmit:t[4]||(t[4]=(0,s.iM)(((...e)=>r.onCreateSubcategory&&r.onCreateSubcategory(...e)),["prevent"]))},[(0,c._)("div",Rc,[(0,c._)("table",Qc,[(0,c._)("tbody",null,[(0,c._)("tr",null,[Gc,(0,c._)("td",Jc,[(0,c.wy)((0,c._)("input",{type:"text",class:"form-control",id:"subcategory","onUpdate:modelValue":t[2]||(t[2]=e=>n.name=e),disabled:n.isReadOnly},null,8,Xc),[[s.nr,n.name]])])]),(0,c._)("tr",null,[ed,(0,c._)("td",td,[(0,c.wy)((0,c._)("select",{class:"form-control",id:"category","onUpdate:modelValue":t[3]||(t[3]=e=>n.category=e),disabled:n.isReadOnly},[sd,((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(n.categories,(e=>((0,c.wg)(),(0,c.iD)("option",{key:e.id,value:e.id},(0,d.zw)(e.name),9,od)))),128))],8,ad),[[s.bM,n.category]])])])])])]),(0,c._)("div",nd,[n.isReadOnly?(0,c.kq)("",!0):((0,c.wg)(),(0,c.iD)("button",rd," Guardar cambios ")),n.isReadOnly?((0,c.wg)(),(0,c.iD)("button",id," Volver ")):(0,c.kq)("",!0),(0,c.Wm)(i,{to:"/subcategories",class:"btn btn-danger"},{default:(0,c.w5)((()=>[(0,c.Uk)("Cancelar")])),_:1})])],32)])],64)}var cd={data(){return{name:"",category:"",categories:[],isReadOnly:!1,type:""}},created(){const e=this.$route.params.id;e?(this.type="edit",this.fetchCategoryData(e)):(this.type="new",this.isReadOnly=!1)},mounted(){this.$state.navbarTitle="Agregar Nueva Subcategoría",ee.Z.get(te+"/categories").then((e=>{this.categories=e.data})).catch((e=>{console.log(e)}))},computed:{...(0,r.rn)(["checkboxValue"]),checked:{get(){return this.checkboxValue}}},methods:{...(0,r.OI)(["toggleCheckboxValue"]),handleCheckboxChange(){this.toggleCheckboxValue()},onCreateSubcategory(){let e={subcategory:{name:this.name,category_id:this.category}};e.user=this.$store.state.user.id,"new"===this.type?this.createSubcategory(e):this.updateSubcategory(e)},createSubcategory(e){ee.Z.post(te+"/subcategories",e).then((async e=>{console.log(e),ae.Am.success("Subcategoría creada exitosamente"),await new Promise((e=>setTimeout(e,2e3))),this.$router.push("/subcategories")})).catch((async e=>{console.log(e),ae.Am.error("Error al crear la subcategoría"),await new Promise((e=>setTimeout(e,2e3)))}))},updateSubcategory(e){const t=this.$route.params.id;ee.Z.put(`${te}/subcategories/${t}`,e).then((async e=>{console.log(e),ae.Am.success("Subcategoría actualizada exitosamente"),await new Promise((e=>setTimeout(e,2e3))),this.$router.push("/subcategories")})).catch((async e=>{console.log(e),ae.Am.error("Error al actualizar la subcategoría"),await new Promise((e=>setTimeout(e,2e3)))}))},fetchSubcategoryData(e){ee.Z.get(`${te}/subcategories/${e}`).then((e=>{const t=e.data;this.name=t.name})).catch((e=>{console.log(e)}))}}};const dd=(0,re.Z)(cd,[["render",ld],["__scopeId","data-v-4381caed"]]);var ud=dd;const md=e=>((0,c.dD)("data-v-b199eaa6"),e=e(),(0,c.Cn)(),e),hd={class:"container"},_d={class:"table-responsive"},gd={class:"table table-bordered table-secondary"},pd=md((()=>(0,c._)("td",{class:"table-label"},"Ingrese el nombre del diseño:",-1))),bd={class:"table-input"},fd={class:"input-group"},vd=md((()=>(0,c._)("span",{class:"input-group-text"},[(0,c._)("i",{class:"bi bi-x-diamond-fill"})],-1))),wd=["disabled"],yd={class:"d-flex justify-content-end"},kd={key:0,class:"btn btn-primary",type:"submit"},Cd={key:1,class:"btn btn-danger",type:"submit"};function xd(e,t,a,o,n,r){const i=(0,c.up)("router-link");return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c.wy)((0,c._)("input",{type:"checkbox",id:"check","onUpdate:modelValue":t[0]||(t[0]=e=>r.checked=e),onChange:t[1]||(t[1]=(...e)=>r.handleCheckboxChange&&r.handleCheckboxChange(...e))},null,544),[[s.e8,r.checked]]),(0,c._)("div",hd,[(0,c._)("form",{onSubmit:t[3]||(t[3]=(0,s.iM)(((...e)=>r.onSubmit&&r.onSubmit(...e)),["prevent"]))},[(0,c._)("div",_d,[(0,c._)("table",gd,[(0,c._)("tbody",null,[(0,c._)("tr",null,[pd,(0,c._)("td",bd,[(0,c._)("div",fd,[vd,(0,c.wy)((0,c._)("input",{type:"text",class:"form-control",id:"design","onUpdate:modelValue":t[2]||(t[2]=e=>n.name=e),disabled:n.isReadOnly},null,8,wd),[[s.nr,n.name]])])])])])])]),(0,c._)("div",yd,[n.isReadOnly?(0,c.kq)("",!0):((0,c.wg)(),(0,c.iD)("button",kd," Guardar cambios ")),n.isReadOnly?((0,c.wg)(),(0,c.iD)("button",Cd," Volver ")):(0,c.kq)("",!0),(0,c.Wm)(i,{to:"/designs",class:"btn btn-danger"},{default:(0,c.w5)((()=>[(0,c.Uk)("Cancelar")])),_:1})])],32)])],64)}var Dd={data(){return{name:"",isReadOnly:!1,type:""}},created(){const e=this.$route.params.id;e?(this.type="edit",this.fetchCategoryData(e)):(this.type="new",this.isReadOnly=!1)},computed:{...(0,r.rn)(["checkboxValue"]),checked:{get(){return this.checkboxValue}}},methods:{...(0,r.OI)(["toggleCheckboxValue"]),handleCheckboxChange(){this.toggleCheckboxValue()},onSubmit(){let e={design:{name:this.name}};e.user=this.$store.state.user.id,"new"===this.type?this.createDesign(e):this.updateDesign(e)},createDesign(e){ee.Z.post(`${te}/designs`,e).then((async e=>{console.log(e),ae.Am.success("Diseño creado exitosamente"),await new Promise((e=>setTimeout(e,2e3))),this.$router.push("/designs")})).catch((async e=>{console.log(e),ae.Am.error("Error al crear el diseño"),await new Promise((e=>setTimeout(e,2e3)))}))},updateDesign(e){const t=this.$route.params.id;ee.Z.put(`${te}/designs/${t}`,e).then((async e=>{console.log(e),ae.Am.success("Diseño actualizado exitosamente"),await new Promise((e=>setTimeout(e,2e3))),this.$router.push("/designs")})).catch((async e=>{console.log(e),ae.Am.error("Error al actualizar el diseño"),await new Promise((e=>setTimeout(e,2e3)))}))},fetchDesignData(e){ee.Z.get(`${te}/designs/${e}`).then((e=>{const t=e.data;this.name=t.name})).catch((e=>{console.log(e)}))}},mounted(){this.$state.navbarTitle="Agregar Nuevo Diseño"}};const Id=(0,re.Z)(Dd,[["render",xd],["__scopeId","data-v-b199eaa6"]]);var Sd=Id;const Od=e=>((0,c.dD)("data-v-e1ec5ea8"),e=e(),(0,c.Cn)(),e),Vd={class:"container"},Ad={class:"table-responsive"},Td={class:"table table-bordered table-secondary"},$d=Od((()=>(0,c._)("td",{class:"table-label"},"Ingrese el nombre de la bodega:",-1))),Ud={class:"table-input"},Ld={class:"input-group"},jd=Od((()=>(0,c._)("span",{class:"input-group-text"},[(0,c._)("i",{class:"bi bi-box-seam-fill"})],-1))),zd=["disabled"],Ed={class:"d-flex justify-content-end"},Bd={key:0,class:"btn btn-primary",type:"submit"},Hd={key:1,class:"btn btn-danger",type:"submit"};function Wd(e,t,a,o,n,r){const i=(0,c.up)("router-link");return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c.wy)((0,c._)("input",{type:"checkbox",id:"check","onUpdate:modelValue":t[0]||(t[0]=e=>r.checked=e),onChange:t[1]||(t[1]=(...e)=>r.handleCheckboxChange&&r.handleCheckboxChange(...e))},null,544),[[s.e8,r.checked]]),(0,c._)("div",Vd,[(0,c._)("form",{onSubmit:t[3]||(t[3]=(0,s.iM)(((...e)=>r.onSubmit&&r.onSubmit(...e)),["prevent"]))},[(0,c._)("div",Ad,[(0,c._)("table",Td,[(0,c._)("tbody",null,[(0,c._)("tr",null,[$d,(0,c._)("td",Ud,[(0,c._)("div",Ld,[jd,(0,c.wy)((0,c._)("input",{type:"text",class:"form-control",id:"warehouse",name:"warehouse","onUpdate:modelValue":t[2]||(t[2]=e=>n.name=e),disabled:n.isReadOnly},null,8,zd),[[s.nr,n.name]])])])])])])]),(0,c._)("div",Ed,[n.isReadOnly?(0,c.kq)("",!0):((0,c.wg)(),(0,c.iD)("button",Bd," Guardar cambios ")),n.isReadOnly?((0,c.wg)(),(0,c.iD)("button",Hd," Volver ")):(0,c.kq)("",!0),(0,c.Wm)(i,{to:"/warehouses",class:"btn btn-danger"},{default:(0,c.w5)((()=>[(0,c.Uk)("Cancelar")])),_:1})])],32)])],64)}var Zd={data(){return{name:"",isReadOnly:!1,type:""}},created(){const e=this.$route.params.id;e?(this.type="edit",this.fetchCategoryData(e)):(this.type="new",this.isReadOnly=!1)},computed:{...(0,r.rn)(["checkboxValue"]),checked:{get(){return this.checkboxValue}}},methods:{...(0,r.OI)(["toggleCheckboxValue"]),handleCheckboxChange(){this.toggleCheckboxValue()},onSubmit(){let e={warehouse:{name:this.name}};e.user=this.$store.state.user.id,"new"===this.type?this.createWarehouse(e):this.updateWarehouse(e)},createWarehouse(e){ee.Z.post(`${te}/warehouses`,e).then((async e=>{console.log(e),ae.Am.success("Bodega creada exitosamente"),await new Promise((e=>setTimeout(e,2e3))),this.$router.push("/warehouses")})).catch((async e=>{console.log(e),ae.Am.error("Error al crear la bodega"),await new Promise((e=>setTimeout(e,2e3)))}))},updateWarehouse(e){const t=this.$route.params.id;ee.Z.put(`${te}/warehouses/${t}`,e).then((async e=>{console.log(e),ae.Am.success("Bodega actualizada exitosamente"),await new Promise((e=>setTimeout(e,2e3))),this.$router.push("/warehouses")})).catch((async e=>{console.log(e),ae.Am.error("Error al actualizar la bodega"),await new Promise((e=>setTimeout(e,2e3)))}))},fetchWarehouseData(e){ee.Z.get(`${te}/warehouses/${e}`).then((e=>{const t=e.data;this.name=t.name})).catch((e=>{console.log(e)}))}},mounted(){this.$state.navbarTitle="Agregar Nueva Bodega"}};const Pd=(0,re.Z)(Zd,[["render",Wd],["__scopeId","data-v-e1ec5ea8"]]);var Fd=Pd;const Md=e=>((0,c.dD)("data-v-4618e532"),e=e(),(0,c.Cn)(),e),qd={class:"background-image"},Nd={class:"d-flex justify-content-center align-items-center vh-100"},Yd={class:"overlay"},Kd=(0,c.uE)('<div class="mb-4" data-v-4618e532><div class="logo-container" data-v-4618e532><img src="'+Ke+'" alt="Logo" class="logo" data-v-4618e532><h2 class="h2" data-v-4618e532>Iniciar sesión</h2></div></div><div class="form-outline mb-4" data-v-4618e532><input type="email" id="email" class="form-control" required data-v-4618e532><label class="form-label" for="email" data-v-4618e532>Correo electrónico</label></div><div class="form-outline mb-4" data-v-4618e532><input type="password" id="password" class="form-control" required data-v-4618e532><label class="form-label" for="password" data-v-4618e532>Contraseña</label></div>',3),Rd={class:"row mb-4"},Qd=Md((()=>(0,c._)("div",{class:"col d-flex justify-content-center"},[(0,c._)("div",{class:"form-check"},[(0,c._)("input",{class:"form-check-input",type:"checkbox",value:"",id:"remind_me",checked:""}),(0,c._)("label",{class:"form-check-label",for:"remind_me"},"Recordarme")])],-1))),Gd={class:"col"};function Jd(e,t,a,o,n,r){return(0,c.wg)(),(0,c.iD)("div",qd,[(0,c._)("div",Nd,[(0,c._)("div",Yd,[(0,c._)("form",{onSubmit:t[2]||(t[2]=(0,s.iM)(((...e)=>r.login&&r.login(...e)),["prevent"])),class:"text-center"},[Kd,(0,c._)("div",Rd,[Qd,(0,c._)("div",Gd,[(0,c._)("a",{href:"",onClick:t[0]||(t[0]=(...e)=>r.forgotPass&&r.forgotPass(...e))},"¿Olvidaste tu contraseña?")])]),(0,c._)("button",{type:"submit",class:"btn btn-primary full-width d-block",onClick:t[1]||(t[1]=(...t)=>e.log&&e.log(...t))},"Iniciar sesión")],32)])])])}var Xd={methods:{forgotPass(){this.$router.push("/sendEmail")},login(){const e=document.getElementById("email").value,t=document.getElementById("password").value;let a={email:e,password:t,current_warehouse_logged_id:1};ee.Z.post(`${te}/users/sign_in`,a).then((e=>{const t=e.headers,s=t["authorization"];console.log(e),a=e.data.data,"success"===e.data.status&&(this.$store.commit("setLoggedIn",!0),this.$store.commit("setUser",a),this.$store.commit("setSessionToken",s),this.$router.push("/home"))})).catch((e=>{const{response:t}=e;console.log(t),ae.Am.error("Error al iniciar sesión",{position:"bottom-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0})}))}},mounted(){this.$store.commit("setCheck",!1),this.$store.commit("setLoggedIn",!1),this.$store.commit("setLogAttempt",!1)}};const eu=(0,re.Z)(Xd,[["render",Jd],["__scopeId","data-v-4618e532"]]);var tu=eu;const au=e=>((0,c.dD)("data-v-1237ca5e"),e=e(),(0,c.Cn)(),e),su={class:"container"},ou={class:"row justify-content-center"},nu={class:"col-md-8"},ru={class:"table table-bordered table-secondary"},iu=au((()=>(0,c._)("td",{class:"table-label"},"Nombre Completo:",-1))),lu={class:"table-input"},cu=au((()=>(0,c._)("td",{class:"table-label"},"Cédula:",-1))),du={class:"table-input"},uu=au((()=>(0,c._)("td",{class:"table-label"},"Correo Electrónico:",-1))),mu={class:"table-input"},hu=au((()=>(0,c._)("td",{class:"table-label"},"Rol:",-1))),_u={class:"table-input"},gu=au((()=>(0,c._)("option",{value:"",disabled:"",selected:""},"Seleccionar rol",-1))),pu=au((()=>(0,c._)("option",{value:"admin"},"Administrador",-1))),bu=au((()=>(0,c._)("option",{value:"user"},"Usuario Regular",-1))),fu=[gu,pu,bu],vu={class:"text-center"},wu=au((()=>(0,c._)("button",{type:"submit",class:"btn btn-primary"},"Registrar Usuario",-1)));function yu(e,t,a,o,n,r){const i=(0,c.up)("router-link");return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c.wy)((0,c._)("input",{type:"checkbox",id:"check","onUpdate:modelValue":t[0]||(t[0]=e=>r.checked=e),onChange:t[1]||(t[1]=(...e)=>r.handleCheckboxChange&&r.handleCheckboxChange(...e))},null,544),[[s.e8,r.checked]]),(0,c._)("div",su,[(0,c._)("div",ou,[(0,c._)("div",nu,[(0,c._)("form",{onSubmit:t[6]||(t[6]=(0,s.iM)(((...e)=>r.OnCreateUser&&r.OnCreateUser(...e)),["prevent"]))},[(0,c._)("table",ru,[(0,c._)("tbody",null,[(0,c._)("tr",null,[iu,(0,c._)("td",lu,[(0,c.wy)((0,c._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>n.name=e),required:""},null,512),[[s.nr,n.name]])])]),(0,c._)("tr",null,[cu,(0,c._)("td",du,[(0,c.wy)((0,c._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[3]||(t[3]=e=>n.idCard=e),required:""},null,512),[[s.nr,n.idCard]])])]),(0,c._)("tr",null,[uu,(0,c._)("td",mu,[(0,c.wy)((0,c._)("input",{type:"email",class:"form-control","onUpdate:modelValue":t[4]||(t[4]=e=>n.email=e),required:""},null,512),[[s.nr,n.email]])])]),(0,c._)("tr",null,[hu,(0,c._)("td",_u,[(0,c.wy)((0,c._)("select",{class:"form-control","onUpdate:modelValue":t[5]||(t[5]=e=>n.role=e),required:""},fu,512),[[s.bM,n.role]])])])])]),(0,c._)("div",vu,[wu,(0,c.Wm)(i,{to:"/users",class:"btn btn-danger"},{default:(0,c.w5)((()=>[(0,c.Uk)("Cancelar")])),_:1})])],32)])])])],64)}var ku={data(){return{name:"",idCard:"",email:"",role:"",current_user_id:""}},computed:{...(0,r.rn)(["checkboxValue"]),checked:{get(){return this.checkboxValue}}},methods:{...(0,r.OI)(["toggleCheckboxValue"]),handleCheckboxChange(){this.toggleCheckboxValue()},OnCreateUser(){const e={name:this.name,id_card:this.idCard,email:this.email,role:this.role};ee.Z.post(`${te}/users`,{user:e,creator_user_id:this.current_user_id}).then((()=>{ae.Am.success("El usuario ha sido registrado exitosamente",{position:"bottom-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}).then((()=>{this.name="",this.idCard="",this.email="",this.role=""}))})).catch((e=>{console.log(e),ae.Am.error("Error al registrar el usuario",{position:"bottom-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0})}))}},mounted(){this.$state.navbarTitle="Registro de usuario",this.current_user_id=this.$store.state.user.id}};const Cu=(0,re.Z)(ku,[["render",yu],["__scopeId","data-v-1237ca5e"]]);var xu=Cu;const Du=e=>((0,c.dD)("data-v-2deba61f"),e=e(),(0,c.Cn)(),e),Iu={class:"password-reset-form background-image"},Su={class:"card text-center overlay"},Ou=Du((()=>(0,c._)("div",{class:"card-header h4 text-white bg-primary"},"Restablecimiento de Contraseña",-1))),Vu={class:"card-body"},Au=Du((()=>(0,c._)("p",{class:"card-text py-3"}," Ingrese su dirección de correo electrónico y le enviaremos un correo electrónico con las instrucciones para restablecer su contraseña. ",-1))),Tu={class:"form-group"},$u=Du((()=>(0,c._)("label",{class:"form-label",for:"typeEmail"},"Correo electrónico",-1))),Uu=Du((()=>(0,c._)("button",{type:"submit",class:"btn btn-primary w-100 mt-3"},"Restablecer contraseña",-1))),Lu={class:"d-flex justify-content-between mt-4"};function ju(e,t,a,o,n,r){return(0,c.wg)(),(0,c.iD)("div",Iu,[(0,c._)("div",Su,[Ou,(0,c._)("div",Vu,[Au,(0,c._)("form",{onSubmit:t[1]||(t[1]=(0,s.iM)(((...e)=>r.resetPassword&&r.resetPassword(...e)),["prevent"])),class:"text-center"},[(0,c._)("div",Tu,[$u,(0,c.wy)((0,c._)("input",{type:"email",id:"typeEmail",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>n.email=e)},null,512),[[s.nr,n.email]])]),Uu],32),(0,c._)("div",Lu,[(0,c._)("a",{class:"text-decoration-none",href:"",onClick:t[2]||(t[2]=(...e)=>r.goToLogin&&r.goToLogin(...e))},"O Inicia sesión")])])])])}var zu={data(){return{email:""}},methods:{resetPassword(){const e={user:{email:this.email}};ee.Z.post(`${te}/users/password/`,e).then((e=>{console.log(e),ae.Am.success("Se ha enviado un correo electrónico con las instrucciones para restablecer su contraseña",{position:"bottom-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0})})).catch((e=>{console.log(e),ae.Am.error("Error en el restablecimiento de contraseña",{position:"bottom-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0})}))},goToLogin(){this.$router.push("/login")}}};const Eu=(0,re.Z)(zu,[["render",ju],["__scopeId","data-v-2deba61f"]]);var Bu=Eu;const Hu=e=>((0,c.dD)("data-v-758282a8"),e=e(),(0,c.Cn)(),e),Wu={class:"background-image"},Zu={class:"d-flex justify-content-center align-items-center vh-100"},Pu={class:"overlay"},Fu=Hu((()=>(0,c._)("div",{class:"mb-4"},[(0,c._)("div",{class:"logo-container"},[(0,c._)("img",{src:Ke,alt:"Logo",class:"logo"}),(0,c._)("h3",{class:"h3"},"Restablecimiento de Contraseña")])],-1))),Mu={class:"form-outline mb-4"},qu=Hu((()=>(0,c._)("label",{class:"form-label",for:"new-password"},"Nueva Contraseña",-1))),Nu={class:"form-outline mb-4"},Yu=Hu((()=>(0,c._)("label",{class:"form-label",for:"confirm-password"},"Confirmar Contraseña",-1))),Ku=Hu((()=>(0,c._)("button",{type:"submit",class:"btn btn-primary full-width d-block"},"Restaurar Contraseña",-1)));function Ru(e,t,a,o,n,r){return(0,c.wg)(),(0,c.iD)("div",Wu,[(0,c._)("div",Zu,[(0,c._)("div",Pu,[(0,c._)("form",{onSubmit:t[2]||(t[2]=(0,s.iM)(((...e)=>r.resetPassword&&r.resetPassword(...e)),["prevent"])),class:"text-center"},[Fu,(0,c._)("div",Mu,[(0,c.wy)((0,c._)("input",{type:"password",id:"new-password",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>n.new_password=e),required:""},null,512),[[s.nr,n.new_password]]),qu]),(0,c._)("div",Nu,[(0,c.wy)((0,c._)("input",{type:"password",id:"confirm-password",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=e=>n.new_password_confirmation=e),required:""},null,512),[[s.nr,n.new_password_confirmation]]),Yu]),Ku],32)])])])}var Qu={data(){return{new_password:"",new_password_confirmation:"",token:""}},methods:{resetPassword(){if(this.new_password===this.new_password_confirmation){const e={new_password:this.new_password,password_confirmation:this.new_password_confirmation,reset_password_token:this.token};ee.Z.put(`${te}/users/password`,e).then((e=>{ae.Am.success("Contraseña actualizada",{position:"bottom-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}),console.log(e),this.$router.push("/login")})).catch((e=>{ae.Am.error("No se pudo actualizar la contraseña",{position:"bottom-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0}),console.log(e)}))}else ae.Am.error("Las contraseñas no coinciden",{position:"bottom-right",timeout:2e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0})}},mounted(){this.$state.navbarTitle="Restablecimiento de Contraseña",this.token=this.$route.query.reset_password_token,console.log(this.token)}};const Gu=(0,re.Z)(Qu,[["render",Ru],["__scopeId","data-v-758282a8"]]);var Ju=Gu;a(5654);const Xu=(0,n.p7)({history:(0,n.PO)("/MercadoTelas_FrontEnd/"),routes:[{path:"",redirect:"/login"},{path:"/",component:"/login"},{path:"/login",component:tu},{component:it,meta:{requiresAuth:!0}},{path:"/home",component:le,meta:{requiresAuth:!0}},{path:"/userProfile",component:Te,meta:{requiresAuth:!0}},{path:"/entry",name:"Entry",component:ea,meta:{requiresAuth:!0}},{path:"/Entry-from-home/:warehouse",name:"Entry-from-home",component:ea,meta:{requiresAuth:!0}},{path:"/transfer",component:Ka,meta:{requiresAuth:!0}},{path:"/output",component:Hs,meta:{requiresAuth:!0}},{path:"/inventory",component:$o,meta:{requiresAuth:!0}},{path:"/items/new/",name:"AddArticle",component:_c,meta:{requiresAuth:!0}},{path:"/items/edit/:id",name:"EditArticle",component:_c,meta:{requiresAuth:!0}},{path:"/items/details/:id",name:"ArticleDetails",component:_c,meta:{requiresAuth:!0}},{path:"/categories/new",name:"AddCategory",component:Ac,meta:{requiresAuth:!0}},{path:"/categories/edit/:id",name:"EditCategory",component:Ac,meta:{requiresAuth:!0}},{path:"/subcategories/new",name:"AddSubcategory",component:ud,meta:{requiresAuth:!0}},{path:"/subcategories/edit/:id",name:"EditSubcategory",component:ud,meta:{requiresAuth:!0}},{path:"/brands/new",name:"AddBrand",component:Nc,meta:{requiresAuth:!0}},{path:"/brands/edit/:id",name:"EditBrand",component:Nc,meta:{requiresAuth:!0}},{path:"/designs/new",name:"AddDesign",component:Sd,meta:{requiresAuth:!0}},{path:"/designs/edit/:id",name:"EditDesign",component:Sd,meta:{requiresAuth:!0}},{path:"/warehouses/new",name:"AddWarehouse",component:Fd,meta:{requiresAuth:!0}},{path:"/warehouses/edit/id",name:"EditWarehouse",component:Fd,meta:{requiresAuth:!0}},{path:"/items",name:"Items",component:qr,meta:{requiresAuth:!0}},{path:"/categories",component:Go,meta:{requiresAuth:!0}},{path:"/subcategories",component:bn,meta:{requiresAuth:!0}},{path:"/brands",component:jn,meta:{requiresAuth:!0}},{path:"/designs",component:er,meta:{requiresAuth:!0}},{path:"/warehouses",component:fr,meta:{requiresAuth:!0}},{path:"/users",component:ii,meta:{requiresAuth:!0}},{path:"/users/new",name:"AddUser",component:xu,meta:{requiresAuth:!0}},{path:"/login",component:tu},{path:"/sendEmail",component:Bu},{path:"/resetPassword",component:Ju},{path:"/transactions",name:"ListTransaction",component:Fi,meta:{requiresAuth:!0}}]}),em=(0,s.ri)(it);em.use(l),em.use(Xu),Xu.beforeResolve(((e,t,a)=>{const s=e.matched.some((e=>e.meta.requiresAuth));!l.state.isLoggedIn&&s?a("/login"):a()}));const tm=(0,o.qj)({navbarTitle:"Inicio"});em.config.globalProperties.$state=tm,em.mount("#app")}},t={};function a(s){var o=t[s];if(void 0!==o)return o.exports;var n=t[s]={id:s,loaded:!1,exports:{}};return e[s].call(n.exports,n,n.exports,a),n.loaded=!0,n.exports}a.m=e,function(){var e=[];a.O=function(t,s,o,n){if(!s){var r=1/0;for(d=0;d<e.length;d++){s=e[d][0],o=e[d][1],n=e[d][2];for(var i=!0,l=0;l<s.length;l++)(!1&n||r>=n)&&Object.keys(a.O).every((function(e){return a.O[e](s[l])}))?s.splice(l--,1):(i=!1,n<r&&(r=n));if(i){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[s,o,n]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){a.p="/MercadoTelas_FrontEnd/"}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var o,n,r=s[0],i=s[1],l=s[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(o in i)a.o(i,o)&&(a.m[o]=i[o]);if(l)var d=l(a)}for(t&&t(s);c<r.length;c++)n=r[c],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(d)},s=self["webpackChunkmercado_telas_front"]=self["webpackChunkmercado_telas_front"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(889)}));s=a.O(s)})();
//# sourceMappingURL=app.4e5dcdc7.js.map